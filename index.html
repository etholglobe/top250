<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ethol Globe — Spherical Projection</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg: #06080c;
    --surface: rgba(10, 13, 20, 0.85);
    --glass: rgba(12, 15, 24, 0.72);
    --border: rgba(255,255,255,0.06);
    --border-bright: rgba(255,255,255,0.12);
    --accent: #b8e636;
    --accent-glow: rgba(184, 230, 54, 0.12);
    --accent2: #36e6c8;
    --text: #e4e7ed;
    --text-dim: #8a92a4;
    --text-mid: #b5bcc8;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  html, body { height: 100%; overflow: hidden; }

  body {
    font-family: 'Instrument Sans', -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* ── Ambient Background ── */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse 60% 50% at 50% 30%, rgba(184,230,54,0.03) 0%, transparent 70%),
      radial-gradient(ellipse 40% 35% at 80% 70%, rgba(54,230,200,0.02) 0%, transparent 60%),
      radial-gradient(ellipse 50% 40% at 15% 60%, rgba(100,120,200,0.015) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  /* Subtle grid */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(255,255,255,0.01) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.01) 1px, transparent 1px);
    background-size: 80px 80px;
    pointer-events: none;
    z-index: 0;
    mask-image: radial-gradient(ellipse 70% 70% at 50% 50%, black, transparent);
    -webkit-mask-image: radial-gradient(ellipse 70% 70% at 50% 50%, black, transparent);
  }

  /* ── Header ── */
  header {
    position: relative;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 28px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(10,13,20,0.92) 0%, rgba(6,8,12,0.7) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    flex-shrink: 0;
    animation: fadeSlideDown 0.6s ease-out both;
  }

  @keyframes fadeSlideDown {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .wordmark {
    display: flex;
    align-items: baseline;
    gap: 12px;
  }

  .wordmark-title {
    font-size: 19px;
    font-weight: 700;
    letter-spacing: -0.03em;
    color: var(--text);
    line-height: 1;
  }

  .wordmark-title span { color: var(--accent); }

  .wordmark-sub {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8.5px;
    font-weight: 500;
    letter-spacing: 0.06em;
    color: var(--text-dim);
    text-transform: uppercase;
    padding: 2px 10px;
    border-left: 1px solid var(--border);
  }

  .header-meta {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8.5px;
    font-weight: 500;
    color: var(--text-dim);
    display: flex;
    gap: 0;
    letter-spacing: 0.06em;
  }

  .header-meta div {
    padding: 2px 14px;
  }

  .header-meta div + div {
    border-left: 1px solid var(--border);
  }

  /* ── Viewer — fills remaining space ── */
  #viewer {
    flex: 1;
    position: relative;
    overflow: hidden;
    background: #040609;
    z-index: 1;
  }

  #viewer canvas { display: block; position: relative; z-index: 1; }

  /* Vignette */
  .viewer-vignette {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    box-shadow: inset 0 0 140px 50px rgba(4,6,9,0.55);
  }

  /* Top accent line */
  .viewer-scanline {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent) 30%, var(--accent) 70%, transparent);
    opacity: 0.12;
    z-index: 3;
    pointer-events: none;
  }

  /* Corner brackets */
  .corner { position: absolute; width: 20px; height: 20px; z-index: 5; pointer-events: none; opacity: 0.3; transition: opacity 0.3s; }
  #viewer:hover .corner { opacity: 0.5; }
  .corner.tl { top: 14px; left: 14px; border-top: 1.5px solid var(--accent); border-left: 1.5px solid var(--accent); }
  .corner.tr { top: 14px; right: 14px; border-top: 1.5px solid var(--accent); border-right: 1.5px solid var(--accent); }
  .corner.bl { bottom: 14px; left: 14px; border-bottom: 1.5px solid var(--accent2); border-left: 1.5px solid var(--accent2); }
  .corner.br { bottom: 14px; right: 14px; border-bottom: 1.5px solid var(--accent2); border-right: 1.5px solid var(--accent2); }

  /* ── Bottom Bar (dark, like header) ── */
  .bottom-bar {
    position: relative;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 28px;
    border-top: 1px solid var(--border);
    background: linear-gradient(0deg, rgba(10,13,20,0.92) 0%, rgba(6,8,12,0.7) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    flex-shrink: 0;
    gap: 16px;
    animation: fadeSlideUp 0.6s ease-out 0.1s both;
  }

  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .dock {
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 5px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border-bright);
    border-radius: 12px;
  }

  .dock-section { display: flex; align-items: center; gap: 2px; }

  .dock-divider {
    width: 1px;
    height: 22px;
    background: var(--border-bright);
    margin: 0 5px;
    flex-shrink: 0;
  }

  .bottom-bar .footer-note {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px; font-weight: 500;
    color: var(--text-dim);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .bottom-bar .status {
    display: flex; align-items: center; gap: 5px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px; font-weight: 500;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    text-transform: uppercase;
  }

  .bottom-left {
    position: absolute;
    left: 28px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .bottom-right {
    position: absolute;
    right: 28px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  /* File Upload */
  .file-upload-label {
    display: flex;
    align-items: center;
    gap: 7px;
    padding: 7px 13px;
    border-radius: 9px;
    cursor: pointer;
    font-size: 11.5px;
    font-weight: 600;
    color: var(--text-mid);
    letter-spacing: 0.02em;
    transition: all 0.2s;
    white-space: nowrap;
    background: transparent;
  }
  .file-upload-label:hover { color: var(--accent); background: var(--accent-glow); }
  .file-upload-label svg { flex-shrink: 0; }

  #dataFile { display: none; }

  #fileName {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 500;
    color: var(--text-dim);
    max-width: 110px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 0 2px;
  }

  /* Toggles */
  .toggle-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 7px 11px;
    border-radius: 9px;
    border: none;
    background: transparent;
    color: var(--text-dim);
    font-family: 'Instrument Sans', sans-serif;
    font-size: 11.5px;
    font-weight: 600;
    letter-spacing: 0.02em;
    cursor: pointer;
    transition: all 0.18s;
    user-select: none;
    white-space: nowrap;
  }
  .toggle-btn:hover { color: var(--text-mid); background: rgba(255,255,255,0.04); }
  .toggle-btn.active { color: var(--accent); background: var(--accent-glow); }
  .toggle-btn .dot { width: 5px; height: 5px; border-radius: 50%; background: currentColor; opacity: 0.5; transition: opacity 0.18s; }
  .toggle-btn.active .dot { opacity: 1; }

  /* Top-N dropdown */
  .top-n-select {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    letter-spacing: 0.06em;
    color: var(--accent);
    background: rgba(184,230,54,0.08);
    border: 1px solid rgba(184,230,54,0.2);
    border-radius: 5px;
    padding: 5px 8px;
    cursor: pointer;
    outline: none;
    transition: all 0.15s;
    -webkit-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='5' viewBox='0 0 8 5'%3E%3Cpath d='M0 0l4 5 4-5z' fill='%23b8e636'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 6px center;
    padding-right: 20px;
  }
  .top-n-select:hover {
    background-color: rgba(184,230,54,0.12);
    border-color: rgba(184,230,54,0.35);
  }
  .top-n-select option {
    background: #0a0c10;
    color: var(--accent);
  }

  /* Render button */
  #renderBtn {
    display: flex;
    align-items: center;
    gap: 7px;
    padding: 7px 16px;
    border-radius: 9px;
    border: none;
    background: var(--accent);
    color: #0a0d14;
    font-family: 'Instrument Sans', sans-serif;
    font-size: 11.5px;
    font-weight: 700;
    letter-spacing: 0.04em;
    cursor: pointer;
    text-transform: uppercase;
    transition: all 0.18s;
    white-space: nowrap;
  }
  #renderBtn:hover { background: #c8ee4a; box-shadow: 0 4px 20px rgba(184,230,54,0.3); transform: translateY(-1px); }
  #renderBtn:active { transform: translateY(0); box-shadow: none; }

  /* ── Stats overlay ── */
  .stats-overlay {
    position: absolute;
    top: 18px;
    left: 22px;
    z-index: 10;
    display: none;
    flex-direction: column;
    gap: 8px;
    pointer-events: none;
  }
  .stats-overlay.visible { display: flex; animation: fadeIn 0.5s ease-out both; }

  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  .stat-chip { display: flex; align-items: baseline; gap: 8px; }
  .stat-chip-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px; font-weight: 600;
    letter-spacing: 0.14em; text-transform: uppercase;
    color: var(--text-dim);
    min-width: 72px;
  }
  .stat-chip-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--accent);
    font-weight: 700;
  }

  /* ── Tilt slider ── */
  #tilt-wrap {
    position: absolute;
    right: auto;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    z-index: 10;
    pointer-events: none;
    opacity: 0.4;
    transition: opacity 0.3s;
  }
  #viewer:hover #tilt-wrap { opacity: 1; }
  #tilt-wrap * { pointer-events: all; }

  #tiltReset {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(184,230,54,0.2);
    border-radius: 5px;
    color: var(--accent);
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 700;
    width: 20px; height: 20px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
    padding: 0;
  }
  #tiltReset:hover { background: var(--accent-glow); border-color: var(--accent); }

  #tiltSlider {
    -webkit-appearance: slider-vertical;
    appearance: slider-vertical;
    writing-mode: vertical-lr;
    direction: rtl;
    width: 3px; height: 110px;
    background: rgba(255,255,255,0.07);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }
  #tiltSlider::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none;
    width: 11px; height: 11px; border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  #tiltSlider::-moz-range-thumb {
    width: 11px; height: 11px; border: none; border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  .tilt-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px; font-weight: 500;
    color: var(--text-dim);
    letter-spacing: 0.06em;
  }

  /* ── Tooltip ── */
  #ethol-tooltip {
    position: fixed;
    pointer-events: none;
    z-index: 1000;
    background: rgba(8, 10, 16, 0.92);
    border: 1px solid rgba(184,230,54,0.2);
    border-radius: 10px;
    padding: 11px 15px;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    display: none;
    flex-direction: column;
    gap: 6px;
    min-width: 175px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.5);
  }
  #ethol-tooltip.visible { display: flex; }
  .tooltip-row { display: flex; justify-content: space-between; align-items: baseline; gap: 14px; }
  .tooltip-label { font-family: 'JetBrains Mono', monospace; font-size: 8px; font-weight: 600; letter-spacing: 0.14em; text-transform: uppercase; color: var(--text-dim); flex-shrink: 0; }
  .tooltip-val { font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--accent); font-weight: 700; text-align: right; word-break: break-all; max-width: 150px; }
  .tooltip-seed { font-size: 9px; letter-spacing: 0.02em; }
  .tooltip-divider { height: 1px; background: rgba(255,255,255,0.06); margin: 2px 0; }

  /* ── Progress bar ── */
  .progress-wrap {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    z-index: 30;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
  }
  .progress-wrap.active { opacity: 1; }
  .progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 0 2px 2px 0;
    transition: width 0.15s ease-out;
    box-shadow: 0 0 12px var(--accent-glow), 0 0 4px var(--accent);
  }
  .progress-label {
    position: absolute;
    right: 12px;
    bottom: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    color: var(--accent);
    letter-spacing: 0.06em;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 31;
  }
  .progress-label.active { opacity: 1; }

  /* ── Polar Caps slider (in bottom bar) ── */
  .polarcaps-control {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .icecaps-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-dim);
    white-space: nowrap;
  }
  .icecaps-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 80px;
    height: 3px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }
  .icecaps-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 11px;
    height: 11px;
    border-radius: 50%;
    background: var(--accent2);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(54,230,200,0.5);
  }
  .icecaps-slider::-moz-range-thumb {
    width: 11px;
    height: 11px;
    border: none;
    border-radius: 50%;
    background: var(--accent2);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(54,230,200,0.5);
  }
  .icecaps-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    color: var(--accent2);
    min-width: 28px;
    text-align: right;
  }

  /* ── Density slider (in bottom bar) ── */
  .density-control {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .density-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-dim);
    white-space: nowrap;
  }
  .density-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 80px;
    height: 3px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }
  .density-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 11px;
    height: 11px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  .density-slider::-moz-range-thumb {
    width: 11px;
    height: 11px;
    border: none;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  .density-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    color: var(--accent);
    min-width: 28px;
    text-align: right;
  }

  /* ── Go to King button ── */
  .go-king-btn {
    font-family: 'JetBrains Mono', monospace;
    font-size: 7px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--accent);
    background: rgba(184,230,54,0.08);
    border: 1px solid rgba(184,230,54,0.2);
    border-radius: 3px;
    padding: 2px 6px;
    cursor: pointer;
    transition: all 0.18s;
    display: none;
    margin-top: 4px;
    pointer-events: all;
  }
  .go-king-btn:hover {
    background: rgba(184,230,54,0.15);
    border-color: rgba(184,230,54,0.4);
  }
  .go-king-btn.visible { display: inline-block; }

  /* ── Owner League Table ── */
  .league-panel {
    position: absolute;
    top: 12px;
    right: 12px;
    width: 260px;
    max-height: calc(100% - 24px);
    background: rgba(4,6,9,0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 8px;
    padding: 12px 0;
    z-index: 20;
    display: none;
    flex-direction: column;
    overflow: hidden;
    pointer-events: all;
  }
  .league-panel.visible { display: flex; }
  .league-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px 8px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    cursor: pointer;
  }
  .league-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 700;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--text-dim);
  }
  .league-toggle {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    transition: transform 0.2s;
    user-select: none;
  }
  .league-panel.collapsed .league-body { display: none; }
  .league-panel.collapsed .league-allrow { display: none; }
  .league-panel.collapsed { width: auto; min-width: 0; }
  .league-panel.collapsed .league-toggle { transform: rotate(180deg); }
  .league-allrow {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  .league-all-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-dim);
  }
  .league-body {
    overflow-y: auto;
    flex: 1;
    padding: 4px 0;
  }
  .league-body::-webkit-scrollbar { width: 3px; }
  .league-body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }
  .league-row {
    display: flex;
    align-items: center;
    padding: 5px 12px;
    gap: 8px;
    transition: background 0.12s;
    cursor: default;
  }
  .league-row:hover { background: rgba(255,255,255,0.04); }
  .league-cb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    flex-shrink: 0;
    position: relative;
    transition: all 0.12s;
  }
  .league-cb:checked {
    background: var(--accent);
    border-color: var(--accent);
  }
  .league-cb:checked::after {
    content: '✓';
    position: absolute;
    top: -1px; left: 1px;
    font-size: 9px;
    color: #000;
    font-weight: 800;
  }
  .league-row.dimmed .league-owner,
  .league-row.dimmed .league-cells,
  .league-row.dimmed .league-count { opacity: 0.35; }
  .league-rank {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 700;
    color: var(--text-dim);
    min-width: 18px;
    text-align: right;
  }
  .league-color {
    width: 8px;
    height: 8px;
    border-radius: 2px;
    flex-shrink: 0;
  }
  .league-owner {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8.5px;
    font-weight: 500;
    color: var(--text-mid);
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .league-stats {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 1px;
    flex-shrink: 0;
  }
  .league-cells {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 700;
    color: var(--accent);
  }
  .league-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 7px;
    font-weight: 500;
    color: var(--text-dim);
  }
  .league-avg {
    font-family: 'JetBrains Mono', monospace;
    font-size: 7px;
    font-weight: 500;
    color: var(--accent2);
  }

  /* ── Editable tilt value ── */
  .tilt-input {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    color: var(--accent);
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(184,230,54,0.2);
    border-radius: 4px;
    width: 38px;
    text-align: center;
    padding: 2px 2px;
    outline: none;
    transition: border-color 0.15s;
  }
  .tilt-input:focus {
    border-color: var(--accent);
    background: rgba(184,230,54,0.06);
  }

  /* ── Spin speed slider (in bottom bar) ── */
  .spin-speed-control {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .spin-speed-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-dim);
    white-space: nowrap;
  }
  .spin-speed-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 60px;
    height: 3px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }
  .spin-speed-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 11px;
    height: 11px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  .spin-speed-slider::-moz-range-thumb {
    width: 11px;
    height: 11px;
    border: none;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(184,230,54,0.5);
  }
  .spin-speed-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    color: var(--accent);
    min-width: 24px;
    text-align: right;
  }

  .status-dot {
    width: 5px; height: 5px; border-radius: 50%;
    background: var(--accent2);
    animation: pulse 2.5s ease-in-out infinite;
    box-shadow: 0 0 6px rgba(54,230,200,0.4);
  }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }

  .hidden-cb { display: none; }
</style>
</head>
<body>

<header>
  <div class="wordmark">
    <span class="wordmark-title"><span>Ethol</span> Globe</span>
    <span class="wordmark-sub">Spherical Projection of Largest Ethols</span>
  </div>
  <div class="header-meta">
    <div>KECCAK-256</div>
    <div>FIBONACCI SPHERE</div>
    <div>VOXEL RENDER</div>
  </div>
</header>

<div id="viewer">
  <div class="corner tl"></div>
  <div class="corner tr"></div>
  <div class="corner bl"></div>
  <div class="corner br"></div>
  <div class="viewer-vignette"></div>
  <div class="viewer-scanline"></div>
  <div class="progress-wrap" id="progressWrap"><div class="progress-bar" id="progressBar"></div></div>
  <div class="progress-label" id="progressLabel"></div>

  <div class="stats-overlay" id="statsBar">
    <div class="stat-chip"><span class="stat-chip-label">Ethols</span><span class="stat-chip-val" id="statEthols">—</span></div>
    <div class="stat-chip"><span class="stat-chip-label">Total Cells</span><span class="stat-chip-val" id="statTotalCells">—</span></div>
    <div class="stat-chip"><span class="stat-chip-label">King Size</span><span class="stat-chip-val" id="statKing">—</span></div>
    <button class="go-king-btn" id="goKingBtn">Show King</button>
  </div>

  <div id="tilt-wrap">
    <button id="tiltReset" title="Reset tilt to 0°">0</button>
    <input id="tiltSlider" type="range" min="-90" max="90" value="0" step="1">
    <input type="text" class="tilt-input" id="tiltVal" value="0°">
  </div>

  <div class="league-panel" id="leaguePanel">
    <div class="league-header" id="leagueToggle">
      <span class="league-title">Owners Leaderboard</span>
      <span class="league-toggle" style="margin-right:4px">▼</span>
    </div>
    <div class="league-allrow">
      <input type="checkbox" class="league-cb" id="leagueAllCb" checked>
      <span class="league-all-label">All Owners</span>
    </div>
    <div class="league-body" id="leagueBody"></div>
  </div>

</div>

<div class="bottom-bar">
  <div class="bottom-left">
    <span class="footer-note">25 FEBRUARY 2025</span>
  </div>

  <div class="dock">
    <div class="dock-section" id="toggleGroup">
      <button class="toggle-btn active" data-target="spinToggle" type="button"><span class="dot"></span> Spin</button>
      <div class="spin-speed-control">
        <input type="range" id="spinSpeedSlider" class="spin-speed-slider" min="1" max="50" value="5" step="1">
        <span class="spin-speed-val" id="spinSpeedVal">5x</span>
      </div>
      <div class="dock-divider"></div>
      <button class="toggle-btn active" data-target="colorMode" type="button"><span class="dot"></span> Color</button>
      <div class="dock-divider"></div>
      <button class="toggle-btn" data-target="borderMode" type="button"><span class="dot"></span> Borders</button>
    </div>
    <div class="dock-divider"></div>
    <div class="dock-section">
      <select id="topNSelect" class="top-n-select">
        <option value="25" selected>Top 25</option>
        <option value="50">Top 50</option>
        <option value="75">Top 75</option>
        <option value="100">Top 100</option>
        <option value="125">Top 125</option>
        <option value="150">Top 150</option>
        <option value="175">Top 175</option>
        <option value="200">Top 200</option>
        <option value="225">Top 225</option>
        <option value="250">Top 250</option>
      </select>
    </div>
    <div class="dock-divider"></div>
    <button id="renderBtn">
      <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="10 8 16 12 10 16 10 8"/>
      </svg>
      Render
    </button>
  </div>
</div>

<input type="checkbox" id="spinToggle" checked class="hidden-cb">
<input type="checkbox" id="colorMode" checked class="hidden-cb">
<input type="checkbox" id="borderMode" class="hidden-cb">

<div id="ethol-tooltip">
  <div class="tooltip-row"><span class="tooltip-label">Token</span><span class="tooltip-val" id="tt-token">—</span></div>
  <div class="tooltip-row"><span class="tooltip-label">Seed</span><span class="tooltip-val tooltip-seed" id="tt-seed">—</span></div>
  <div class="tooltip-divider"></div>
  <div class="tooltip-row"><span class="tooltip-label">Cells</span><span class="tooltip-val" id="tt-cells">—</span></div>
  <div class="tooltip-row"><span class="tooltip-label">Canvas</span><span class="tooltip-val" id="tt-size">—</span></div>
  <div class="tooltip-row"><span class="tooltip-label">Max Height</span><span class="tooltip-val" id="tt-height">—</span></div>
  <div class="tooltip-divider"></div>
  <div class="tooltip-row"><span class="tooltip-label">Owner</span><span class="tooltip-val tooltip-seed" id="tt-owner">—</span></div>
</div>

<script type="module">
import * as THREE from "https://esm.sh/three@0.160.0";
import { OrbitControls } from "https://esm.sh/three@0.160.0/examples/jsm/controls/OrbitControls.js";
import { keccak256, solidityPacked } from "https://esm.sh/ethers@6.13.2";

/* Toggle buttons driving hidden checkboxes */
document.getElementById('toggleGroup').addEventListener('click', e => {
  const btn = e.target.closest('.toggle-btn');
  if (!btn) return;
  const targetId = btn.dataset.target;
  const checkbox = document.getElementById(targetId);
  checkbox.checked = !checkbox.checked;
  btn.classList.toggle('active', checkbox.checked);
  if (targetId === 'colorMode') applyColorMode();
  if (targetId === 'borderMode') applyBorderMode();
});

/* File name display */
/* Scene — responsive */
const viewer = document.getElementById("viewer");
let W, H;
function updateSize() { W = viewer.clientWidth; H = viewer.clientHeight; }
updateSize();

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x040609);

const camera = new THREE.PerspectiveCamera(50, W / H, 0.1, 200000);
camera.position.set(320, 260, 380);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(W, H);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
viewer.appendChild(renderer.domElement);

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.06;

// Cancel any "Go to King" animation when user interacts
controls.addEventListener('start', () => {
  targetCameraPos = null;
  targetRotationY = null;
  targetRotationX = null;
});

scene.add(new THREE.AmbientLight(0xffffff, 0.9));
const light = new THREE.DirectionalLight(0xffffff, 0.6);
light.position.set(300, 500, 200);
scene.add(light);

const spinGroup = new THREE.Group();
scene.add(spinGroup);

/* Resize */
window.addEventListener('resize', () => {
  updateSize();
  camera.aspect = W / H;
  camera.updateProjectionMatrix();
  renderer.setSize(W, H);
});

/* Data */
let dataset = [];
let etholMats = [];
let baseMat = null;
let atmMesh = null;

function applyColorMode() {
  const useColor = document.getElementById('colorMode')?.checked ?? true;
  scene.background = new THREE.Color(useColor ? 0x040609 : 0xffffff);
  if (atmMesh) atmMesh.visible = useColor;
  if (baseMat) { baseMat.color.set(useColor ? 0x111318 : 0xe8e8e8); baseMat.needsUpdate = true; }
  etholMats.forEach((mat, i) => {
    const info = etholInfos[i];
    const origIdx = info?.origIdx ?? i;
    const owner = info?.owner;
    if (owner && disabledOwners.has(owner)) {
      mat.color.set(useColor ? 0x1a1d22 : 0xd8d8d8);
    } else {
      mat.color.copy(useColor ? getEtholColor(origIdx, etholMats.length, owner) : new THREE.Color(0x111111));
    }
    mat.needsUpdate = true;
  });
  borderLines.forEach((line, i) => {
    const info = etholInfos[i];
    const origIdx = info?.origIdx ?? i;
    const owner = info?.owner;
    if (owner && disabledOwners.has(owner)) {
      line.material.color.set(useColor ? 0x161920 : 0xd0d0d0);
    } else {
      const c = useColor ? getEtholColor(origIdx, borderLines.length, owner).multiplyScalar(0.85) : new THREE.Color(0x444444);
      line.material.color.copy(c);
    }
    line.material.needsUpdate = true;
  });
}

/* Contract logic */
function getSize(n) { const expanded = Math.floor(n / 7) * 10; let s = Math.floor(Math.sqrt(expanded)); s = Math.floor(s / 2) * 2; if (s < 8) s = 8; return s; }
function actionFor(i, r) { if (r === 0n) return "Stay"; if (i % 2n === 0n) return r >= 4n ? "Right" : "Left"; return r >= 4n ? "Down" : "Up"; }
function move(x, y, d, S) { if (d === "Left") x--; if (d === "Right") x++; if (d === "Up") y--; if (d === "Down") y++; return [(x + S) % S, (y + S) % S]; }

function compute(seed, n) {
  if (n % 2 !== 0) n++;
  const SIZE = getSize(n);
  const actions = [];
  for (let i = 2; i <= n - 1; i++) { const packed = solidityPacked(["uint256", "uint256"], [seed, i]); const hash = keccak256(packed); const r = BigInt(hash) % 7n; actions.push(actionFor(BigInt(i), r)); }
  let x = Math.floor(SIZE / 2), y = Math.floor(SIZE / 2);
  const heights = new Map();
  function add(px, py) { const k = `${px},${py}`; heights.set(k, (heights.get(k) || 0) + 1); const mx = SIZE - 1 - px; heights.set(`${mx},${py}`, (heights.get(`${mx},${py}`) || 0) + 1); }
  add(x, y);
  for (let i = 0; i < actions.length; i += 2) { [x, y] = move(x, y, actions[i], SIZE); [x, y] = move(x, y, actions[i + 1], SIZE); add(x, y); }
  return { SIZE, heights };
}

/* Placement engine */
const LAT_MAX = (90 - 10) * Math.PI / 180;  // fixed 10° polar caps
const FILL = 0.50;
const BORDER_GAP = 0.035;

function computeWrapScale(sizes) {
  // Available sphere area within the lat band (both caps excluded)
  const bandArea = 4 * Math.PI * Math.sin(LAT_MAX);  // area of band |lat| < LAT_MAX
  // Cap effective fill to 85% of packing efficiency on sphere
  const maxFill = Math.min(FILL, 0.85);

  let lo = 1e-6, hi = 0.1;
  for (let k = 0; k < 120; k++) { const C = (lo + hi) * 0.5; let sum = 0; for (const s of sizes) { const r = C * s; if (r >= Math.PI) { sum = 1e9; break; } sum += 2 * Math.PI * (1 - Math.cos(r)); } if (sum > maxFill * 4 * Math.PI) hi = C; else lo = C; }
  const C = (lo + hi) * 0.5;
  const wrapScale = 1 / (2 * C);
  const radii = sizes.map(s => s / (2 * wrapScale));
  return { wrapScale, radii };
}

function clampToLatBand(pt, r) {
  const latMax = Math.max(0, LAT_MAX - r);
  const lat = Math.asin(THREE.MathUtils.clamp(pt.y, -1, 1));
  if (Math.abs(lat) <= latMax) return;
  const lon = Math.atan2(pt.z, pt.x);
  const clamped = latMax > 0 ? Math.sign(lat) * latMax : 0;
  pt.set(Math.cos(clamped)*Math.cos(lon), Math.sin(clamped), Math.cos(clamped)*Math.sin(lon)).normalize();
}

function circumRadius(r) { return Math.acos(Math.max(-1, Math.min(1, Math.cos(r) * Math.cos(r)))); }

function packAnchors(sizes, radii, iterations = 3000, kingIdx = -1) {
  const n = sizes.length;
  const phi = Math.PI * (3 - Math.sqrt(5));
  const sinMax = Math.sin(LAT_MAX);
  const pts = [];
  for (let i = 0; i < n; i++) { const sinLat = -sinMax + (2 * sinMax) * (i / Math.max(n - 1, 1)); const lat = Math.asin(THREE.MathUtils.clamp(sinLat, -1, 1)); const lon = phi * i; pts.push(new THREE.Vector3(Math.cos(lat)*Math.cos(lon), Math.sin(lat), Math.cos(lat)*Math.sin(lon)).normalize()); }

  // Pin king to equator from the start
  if (kingIdx >= 0 && kingIdx < n) {
    const lon = Math.atan2(pts[kingIdx].z, pts[kingIdx].x);
    pts[kingIdx].set(Math.cos(lon), 0, Math.sin(lon)).normalize();
  }

  for (let i = 0; i < n; i++) if (i !== kingIdx) clampToLatBand(pts[i], radii[i]);

  const packRadii = radii.map(r => circumRadius(r));

  // Perturbation to break symmetry
  for (let i = 0; i < n; i++) { if (i === kingIdx) continue; const j = (i * 113 + 7) % n; const a = pts[i], b = pts[j]; const dot = THREE.MathUtils.clamp(a.dot(b), -1, 1); const dir = b.clone().sub(a.clone().multiplyScalar(dot)); if (dir.length() > 1e-10) a.add(dir.normalize().multiplyScalar(2e-4)).normalize(); }

  const vel = pts.map(() => new THREE.Vector3());
  const REPULSE_K = 0.012, DAMP = 0.82, MAX_STEP = 0.18, EPS = 1e-9;

  for (let iter = 0; iter < iterations; iter++) {
    // Hard collision pass: directly resolve all overlaps
    for (let i = 0; i < n; i++) {
      for (let j = i + 1; j < n; j++) {
        const a = pts[i], b = pts[j];
        const dot = THREE.MathUtils.clamp(a.dot(b), -1, 1);
        const angle = Math.acos(dot);
        let dA = b.clone().sub(a.clone().multiplyScalar(dot));
        let dB = a.clone().sub(b.clone().multiplyScalar(dot));
        const lA = dA.length(), lB = dB.length();
        if (lA < 1e-12 || lB < 1e-12) { dA = new THREE.Vector3(0,1,0).cross(a); if (dA.length() < 1e-12) dA = new THREE.Vector3(1,0,0).cross(a); dA.normalize(); dB = dA.clone().negate(); } else { dA.multiplyScalar(1/lA); dB.multiplyScalar(1/lB); }
        const minAngle = packRadii[i] + packRadii[j] + BORDER_GAP;
        if (angle < minAngle) {
          // Hard push: resolve most of the overlap immediately
          const overlap = minAngle - angle;
          const pushStrength = Math.min(MAX_STEP, overlap * 0.9);
          if (i === kingIdx) {
            // King is pinned — only push j away
            vel[j].add(dB.clone().multiplyScalar(-pushStrength));
          } else if (j === kingIdx) {
            // King is pinned — only push i away
            vel[i].add(dA.clone().multiplyScalar(-pushStrength));
          } else {
            const wA = packRadii[j] / (packRadii[i] + packRadii[j]);
            const wB = packRadii[i] / (packRadii[i] + packRadii[j]);
            vel[i].add(dA.clone().multiplyScalar(-pushStrength * wA));
            vel[j].add(dB.clone().multiplyScalar(-pushStrength * wB));
          }
        } else {
          // Gentle repulsion for non-overlapping
          const step = Math.min(MAX_STEP * 0.08, REPULSE_K / Math.max(EPS, angle * angle));
          vel[i].add(dA.clone().multiplyScalar(-step));
          vel[j].add(dB.clone().multiplyScalar(-step));
        }
      }
    }
    for (let i = 0; i < n; i++) {
      if (i === kingIdx) { vel[i].set(0,0,0); continue; }
      const v = vel[i];
      v.sub(pts[i].clone().multiplyScalar(pts[i].dot(v)));
      const mag = v.length();
      if (mag > 1e-10) {
        const step = Math.min(MAX_STEP, mag);
        const axis = new THREE.Vector3().crossVectors(pts[i], v).normalize();
        pts[i].applyQuaternion(new THREE.Quaternion().setFromAxisAngle(axis, step)).normalize();
      }
      vel[i].multiplyScalar(DAMP);
      clampToLatBand(pts[i], radii[i]);
    }
    if (iter % 10 === 0) { const com = new THREE.Vector3(); for (const p of pts) com.add(p); com.multiplyScalar(1 / n); if (com.length() > 1e-6) { for (let i = 0; i < n; i++) { if (i === kingIdx) continue; pts[i].sub(com.clone().multiplyScalar(0.03)).normalize(); clampToLatBand(pts[i], radii[i]); } } }
  }

  // Final hard overlap cleanup: iterate until no overlaps remain
  for (let pass = 0; pass < 500; pass++) {
    let hasOverlap = false;
    for (let i = 0; i < n; i++) {
      for (let j = i + 1; j < n; j++) {
        const dot = THREE.MathUtils.clamp(pts[i].dot(pts[j]), -1, 1);
        const angle = Math.acos(dot);
        const minAngle = packRadii[i] + packRadii[j] + BORDER_GAP;
        if (angle < minAngle) {
          hasOverlap = true;
          const overlap = minAngle - angle;
          let dA = pts[j].clone().sub(pts[i].clone().multiplyScalar(dot));
          let dB = pts[i].clone().sub(pts[j].clone().multiplyScalar(dot));
          const lA = dA.length(), lB = dB.length();
          if (lA < 1e-12 || lB < 1e-12) { dA = new THREE.Vector3(0,1,0).cross(pts[i]); if (dA.length() < 1e-12) dA = new THREE.Vector3(1,0,0).cross(pts[i]); dA.normalize(); dB = dA.clone().negate(); } else { dA.multiplyScalar(1/lA); dB.multiplyScalar(1/lB); }
          const wA = packRadii[j] / (packRadii[i] + packRadii[j]);
          const wB = packRadii[i] / (packRadii[i] + packRadii[j]);
          const push = overlap * 0.55;
          // Push directly on positions — but pin king
          if (i === kingIdx) {
            // Only move j
            const axB = new THREE.Vector3().crossVectors(pts[j], dB);
            if (axB.length() > 1e-12) { axB.normalize(); pts[j].applyQuaternion(new THREE.Quaternion().setFromAxisAngle(axB, -push)).normalize(); }
            clampToLatBand(pts[j], radii[j]);
          } else if (j === kingIdx) {
            // Only move i
            const axA = new THREE.Vector3().crossVectors(pts[i], dA);
            if (axA.length() > 1e-12) { axA.normalize(); pts[i].applyQuaternion(new THREE.Quaternion().setFromAxisAngle(axA, -push)).normalize(); }
            clampToLatBand(pts[i], radii[i]);
          } else {
            const wA = packRadii[j] / (packRadii[i] + packRadii[j]);
            const wB = packRadii[i] / (packRadii[i] + packRadii[j]);
            const axA = new THREE.Vector3().crossVectors(pts[i], dA);
            if (axA.length() > 1e-12) { axA.normalize(); pts[i].applyQuaternion(new THREE.Quaternion().setFromAxisAngle(axA, -push * wA)).normalize(); }
            const axB = new THREE.Vector3().crossVectors(pts[j], dB);
            if (axB.length() > 1e-12) { axB.normalize(); pts[j].applyQuaternion(new THREE.Quaternion().setFromAxisAngle(axB, -push * wB)).normalize(); }
            clampToLatBand(pts[i], radii[i]);
            clampToLatBand(pts[j], radii[j]);
          }
        }
      }
    }
    if (!hasOverlap) break;
  }

  return pts.map(v => ({ x: v.x, y: v.y, z: v.z }));
}

/* Spherical projection */
function sphericalProject(anchor, dx, dz, height, globeR, wrapScale, heightScale) {
  const lat = Math.asin(anchor.y), lon = Math.atan2(anchor.z, anchor.x);
  const lat2 = lat + dx / wrapScale, lon2 = lon + dz / wrapScale;
  const R = globeR + height * heightScale;
  return { x: R*Math.cos(lat2)*Math.cos(lon2), y: R*Math.sin(lat2), z: R*Math.cos(lat2)*Math.sin(lon2), nx: Math.cos(lat2)*Math.cos(lon2), ny: Math.sin(lat2), nz: Math.cos(lat2)*Math.sin(lon2) };
}

/* Render */
function etholColor(i, total) { return new THREE.Color(`hsl(${(i / total) * 360}, 80%, 50%)`); }

/* Owner color map — same owner gets same color */
let ownerColorMap = new Map();
function buildOwnerColorMap(dataArr) {
  ownerColorMap = new Map();
  const uniqueOwners = [...new Set(dataArr.map(d => d.owner).filter(Boolean))];
  uniqueOwners.forEach((owner, i) => {
    ownerColorMap.set(owner, new THREE.Color(`hsl(${(i / uniqueOwners.length) * 360}, 75%, 48%)`));
  });
}
function getEtholColor(idx, total, owner) {
  if (owner && ownerColorMap.has(owner)) return ownerColorMap.get(owner).clone();
  return etholColor(idx, total);
}

let disabledOwners = new Set();

function applyOwnerVisibility() {
  const useColor = document.getElementById('colorMode')?.checked ?? true;
  const greyColor = new THREE.Color(useColor ? 0x1a1d22 : 0xd8d8d8);
  const greyBorder = useColor ? 0x161920 : 0xd0d0d0;
  etholMats.forEach((mat, i) => {
    const info = etholInfos[i];
    const owner = info?.owner;
    if (owner && disabledOwners.has(owner)) {
      mat.color.copy(greyColor);
    } else {
      mat.color.copy(useColor ? getEtholColor(info?.origIdx ?? i, etholMats.length, owner) : new THREE.Color(0x111111));
    }
    mat.needsUpdate = true;
  });
  borderLines.forEach((line, i) => {
    const info = etholInfos[i];
    const owner = info?.owner;
    if (owner && disabledOwners.has(owner)) {
      line.material.color.set(greyBorder);
    } else {
      const c = (document.getElementById('colorMode')?.checked ?? true)
        ? getEtholColor(info?.origIdx ?? i, borderLines.length, owner).multiplyScalar(0.85)
        : new THREE.Color(0x444444);
      line.material.color.copy(c);
    }
    line.material.needsUpdate = true;
  });
}

function buildLeagueTable(dataArr) {
  const panel = document.getElementById('leaguePanel');
  const body = document.getElementById('leagueBody');
  body.innerHTML = '';
  disabledOwners = new Set();

  // Aggregate by owner
  const ownerMap = new Map();
  for (const d of dataArr) {
    const o = d.owner || 'Unknown';
    if (!ownerMap.has(o)) ownerMap.set(o, { count: 0, cells: 0 });
    const entry = ownerMap.get(o);
    entry.count++;
    entry.cells += d.cells;
  }

  // Sort by total cells descending — show all owners
  const sorted = [...ownerMap.entries()].sort((a, b) => b[1].cells - a[1].cells);

  for (let i = 0; i < sorted.length; i++) {
    const [owner, stats] = sorted[i];
    const row = document.createElement('div');
    row.className = 'league-row';

    const color = ownerColorMap.has(owner) ? ownerColorMap.get(owner) : null;
    const colorHex = color ? '#' + color.getHexString() : '#666';

    row.innerHTML = `
      <input type="checkbox" class="league-cb" checked data-owner="${owner}">
      <span class="league-rank">${i + 1}</span>
      <span class="league-color" style="background:${colorHex}"></span>
      <span class="league-owner">${owner === 'Unknown' ? '—' : owner.slice(0, 6) + '…' + owner.slice(-4)}</span>
      <div class="league-stats">
        <span class="league-cells">${stats.cells.toLocaleString()}</span>
        <span class="league-avg">${Math.round(stats.cells / stats.count).toLocaleString()} avg</span>
        <span class="league-count">${stats.count} ethol${stats.count > 1 ? 's' : ''}</span>
      </div>
    `;

    const cb = row.querySelector('.league-cb');
    cb.addEventListener('change', (e) => {
      e.stopPropagation(); // don't trigger panel collapse
      if (cb.checked) {
        disabledOwners.delete(owner);
        row.classList.remove('dimmed');
      } else {
        disabledOwners.add(owner);
        row.classList.add('dimmed');
      }
      applyOwnerVisibility();
    });

    body.appendChild(row);
  }

  if (sorted.length > 0) panel.classList.add('visible');
  else panel.classList.remove('visible');
}

let borderLines = [];
let etholInfos = [];

function applyBorderMode() { const on = document.getElementById('borderMode').checked; for (const l of borderLines) l.visible = on; }

/* Progress bar helpers */
const progressWrap = document.getElementById('progressWrap');
const progressBar = document.getElementById('progressBar');
const progressLabel = document.getElementById('progressLabel');
const renderBtn = document.getElementById('renderBtn');

function showProgress(pct, label) {
  progressWrap.classList.add('active');
  progressLabel.classList.add('active');
  progressBar.style.width = pct + '%';
  progressLabel.textContent = label;
}

function hideProgress() {
  progressBar.style.width = '100%';
  progressLabel.textContent = 'Done';
  setTimeout(() => {
    progressWrap.classList.remove('active');
    progressLabel.classList.remove('active');
    progressBar.style.width = '0%';
  }, 600);
}

function yieldFrame() {
  return new Promise(resolve => setTimeout(resolve, 0));
}

let isRendering = false;
let kingAnchor = null;
let targetRotationY = null;
let targetRotationX = null;
let targetCameraPos = null;

async function render() {
  if (isRendering) return;
  isRendering = true;
  renderBtn.style.opacity = '0.5';
  renderBtn.style.pointerEvents = 'none';

  etholMats = []; baseMat = null; atmMesh = null; borderLines = []; etholInfos = [];
  while (spinGroup.children.length) spinGroup.remove(spinGroup.children[0]);

  showProgress(2, 'Building globe…');
  await yieldFrame();

  const globeR = Math.min(W, H) * 0.42;
  const heightScale = globeR * 0.004;

  baseMat = new THREE.MeshStandardMaterial({ color: 0x111318 });
  spinGroup.add(new THREE.Mesh(new THREE.SphereGeometry(globeR, 64, 48), baseMat));

  atmMesh = new THREE.Mesh(new THREE.SphereGeometry(globeR * 1.03, 64, 48), new THREE.MeshPhongMaterial({ color: 0x88bbff, transparent: true, opacity: 0.2, side: THREE.DoubleSide, blending: THREE.AdditiveBlending }));
  spinGroup.add(atmMesh);

  if (!dataset.length) {
    hideProgress();
    isRendering = false;
    renderBtn.style.opacity = ''; renderBtn.style.pointerEvents = '';
    return;
  }

  showProgress(3, 'Computing ethols…');
  await yieldFrame();

  const ethols = [];
  for (let i = 0; i < dataset.length; i++) {
    ethols.push(compute(dataset[i].seed, dataset[i].cells));
    if (i % 3 === 0) {
      const pct = 3 + Math.round(((i + 1) / dataset.length) * 72);
      showProgress(pct, `Computing ethol ${i + 1}/${dataset.length}…`);
      await yieldFrame();
    }
  }

  showProgress(76, 'Scaling…');
  await yieldFrame();

  // Sort by SIZE descending — large ethols placed first, small ones fill gaps
  const sortOrder = ethols.map((e, i) => i).sort((a, b) => ethols[b].SIZE - ethols[a].SIZE);
  const sortedEthols = sortOrder.map(i => ethols[i]);
  const sortedDataset = sortOrder.map(i => dataset[i]);

  const sizes = sortedEthols.map(e => e.SIZE);
  const { wrapScale, radii } = computeWrapScale(sizes);

  showProgress(78, 'Packing anchors…');
  await yieldFrame();

  // Find king (most cells) in sorted order
  let kingIdxSorted = 0;
  let kingCellsMax = 0;
  for (let i = 0; i < sortedDataset.length; i++) {
    if (sortedDataset[i].cells > kingCellsMax) { kingCellsMax = sortedDataset[i].cells; kingIdxSorted = i; }
  }

  const anchors = packAnchors(sizes, radii, 5000, kingIdxSorted);

  showProgress(85, 'Building meshes…');
  await yieldFrame();

  buildOwnerColorMap(sortedDataset);

  const totalCells = dataset.reduce((s, d) => s + d.cells, 0);
  const maxCells = Math.max(...dataset.map(d => d.cells));
  const kingPct = (maxCells / totalCells * 100).toFixed(1);

  kingAnchor = anchors[kingIdxSorted];

  document.getElementById('statsBar').classList.add('visible');
  document.getElementById('statEthols').textContent = ethols.length;
  document.getElementById('statTotalCells').textContent = totalCells.toLocaleString();
  document.getElementById('statKing').textContent = `${maxCells.toLocaleString()} (${kingPct}%)`;
  document.getElementById('goKingBtn').classList.add('visible');

  // Build owner leaderboard
  buildLeagueTable(sortedDataset);

  const geom = new THREE.BoxGeometry(1, 1, 1);
  const dummy = new THREE.Object3D();
  const up = new THREE.Vector3(0, 1, 0);
  const borderOn = document.getElementById('borderMode').checked;
  const useColor = document.getElementById('colorMode')?.checked ?? true;

  for (let idx = 0; idx < sortedEthols.length; idx++) {
    const e = sortedEthols[idx];
    const origIdx = sortOrder[idx]; // original index for consistent color
    const a = anchors[idx];
    let total = 0; for (const h of e.heights.values()) total += h;
    const colorMat = new THREE.MeshStandardMaterial({ color: useColor ? getEtholColor(origIdx, ethols.length, sortedDataset[idx].owner) : new THREE.Color(0x111111) });
    etholMats.push(colorMat);
    let maxH = 0; for (const h of e.heights.values()) { if (h > maxH) maxH = h; }
    etholInfos.push({ tokenId: sortedDataset[idx].tokenId, seed: sortedDataset[idx].seed, cells: sortedDataset[idx].cells, size: e.SIZE, origIdx, maxHeight: maxH, owner: sortedDataset[idx].owner });
    const mesh = new THREE.InstancedMesh(geom, colorMat, total);
    mesh.userData = { etholIdx: idx };
    let id = 0;
    for (const [k, h] of e.heights) { const [x, y] = k.split(",").map(Number); const dx = -(y - e.SIZE / 2); const dz = x - e.SIZE / 2; for (let z = 0; z < h; z++) { const p = sphericalProject(a, dx, dz, z, globeR, wrapScale, heightScale); dummy.position.set(p.x, p.y, p.z); dummy.quaternion.setFromUnitVectors(up, new THREE.Vector3(p.nx, p.ny, p.nz)); dummy.updateMatrix(); mesh.setMatrixAt(id++, dummy.matrix); } }
    spinGroup.add(mesh);

    const STEPS = 80, S = e.SIZE, edgePoints = [];
    function addEdge(x0, z0, x1, z1) { for (let t = 0; t <= STEPS; t++) { const f = t / STEPS; const dx = -((z0 + f*(z1-z0)) - S/2); const dz = (x0 + f*(x1-x0)) - S/2; const p = sphericalProject(a, dx, dz, 0, globeR + 1, wrapScale, heightScale); edgePoints.push(p.x, p.y, p.z); } }
    addEdge(0,0,S,0); addEdge(S,0,S,S); addEdge(S,S,0,S); addEdge(0,S,0,0);
    const lineGeo = new THREE.BufferGeometry(); lineGeo.setAttribute('position', new THREE.Float32BufferAttribute(edgePoints, 3));
    const lineColor = useColor ? getEtholColor(origIdx, ethols.length, sortedDataset[idx].owner).multiplyScalar(0.85) : new THREE.Color(0x444444);
    const lineMat = new THREE.LineDashedMaterial({ color: lineColor, dashSize: 6, gapSize: 4, linewidth: 1 });
    const line = new THREE.Line(lineGeo, lineMat); line.computeLineDistances(); line.visible = borderOn;
    spinGroup.add(line); borderLines.push(line);

    if (idx % 2 === 0 || idx === sortedEthols.length - 1) {
      const pct = 85 + Math.round(((idx + 1) / sortedEthols.length) * 12);
      showProgress(pct, `Placing ethol ${idx + 1}/${sortedEthols.length}…`);
      await yieldFrame();
    }
  }

  showProgress(97, 'Finalizing…');
  await yieldFrame();

  applyColorMode();
  hideProgress();
  isRendering = false;
  renderBtn.style.opacity = ''; renderBtn.style.pointerEvents = '';
}

document.getElementById("renderBtn").onclick = () => { loadEmbeddedData(); render(); };
document.getElementById("colorMode").addEventListener("change", applyColorMode);
document.getElementById("borderMode").addEventListener("change", applyBorderMode);

/* League panel collapse/expand */
document.getElementById('leagueToggle').addEventListener('click', () => {
  document.getElementById('leaguePanel').classList.toggle('collapsed');
});

/* All Owners checkbox */
document.getElementById('leagueAllCb').addEventListener('change', (e) => {
  const checked = e.target.checked;
  const cbs = document.querySelectorAll('#leagueBody .league-cb');
  cbs.forEach(cb => {
    if (cb.checked !== checked) {
      cb.checked = checked;
      cb.dispatchEvent(new Event('change'));
    }
  });
});

/* Raycaster */
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();
const tooltip = document.getElementById('ethol-tooltip');
const ttSeed = document.getElementById('tt-seed');
const ttToken = document.getElementById('tt-token');
const ttCells = document.getElementById('tt-cells');
const ttSize = document.getElementById('tt-size');
const ttHeight = document.getElementById('tt-height');
const ttOwner = document.getElementById('tt-owner');
let hoveredIdx = -1;

renderer.domElement.addEventListener('mousemove', e => {
  const rect = renderer.domElement.getBoundingClientRect();
  mouse.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
  mouse.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;
  raycaster.setFromCamera(mouse, camera);
  const voxelMeshes = spinGroup.children.filter(c => c.isInstancedMesh && c.userData.etholIdx !== undefined);
  const hits = raycaster.intersectObjects(voxelMeshes, false);
  if (hits.length > 0) {
    const idx = hits[0].object.userData.etholIdx;
    const info = etholInfos[idx];
    if (idx !== hoveredIdx) {
      hoveredIdx = idx;
      const s = info.seed;
      ttToken.textContent = info.tokenId || '—';
      ttSeed.textContent = s.length > 20 ? s.slice(0,12)+'…'+s.slice(-6) : s;
      ttCells.textContent = info.cells.toLocaleString();
      ttSize.textContent = info.size + ' × ' + info.size;
      ttHeight.textContent = info.maxHeight;
      const o = info.owner;
      ttOwner.textContent = o ? (o.slice(0,6) + '…' + o.slice(-4)) : '—';
    }
    tooltip.classList.add('visible');
    tooltip.style.left = (e.clientX + 16) + 'px'; tooltip.style.top = (e.clientY - 10) + 'px';
    const tw = tooltip.offsetWidth, th = tooltip.offsetHeight;
    if (e.clientX + 16 + tw > window.innerWidth) tooltip.style.left = (e.clientX - tw - 8) + 'px';
    if (e.clientY - 10 + th > window.innerHeight) tooltip.style.top = (e.clientY - th) + 'px';
  } else { tooltip.classList.remove('visible'); hoveredIdx = -1; }
});
renderer.domElement.addEventListener('mouseleave', () => { tooltip.classList.remove('visible'); hoveredIdx = -1; });

/* Animate */
const tiltSlider = document.getElementById('tiltSlider');
const tiltVal = document.getElementById('tiltVal');

// Sync slider → input
tiltSlider.addEventListener('input', () => { tiltVal.value = tiltSlider.value + '°'; });

// Editable tilt input: type a degree, press Enter or blur to apply
tiltVal.addEventListener('keydown', e => {
  if (e.key === 'Enter') { tiltVal.blur(); }
});
tiltVal.addEventListener('blur', () => {
  let v = parseInt(tiltVal.value.replace(/[^0-9\-]/g, ''), 10);
  if (isNaN(v)) v = 0;
  v = Math.max(-90, Math.min(90, v));
  tiltSlider.value = v;
  tiltVal.value = v + '°';
});
// Select all on focus for easy editing
tiltVal.addEventListener('focus', () => { tiltVal.select(); });

document.getElementById('tiltReset').addEventListener('click', () => { tiltSlider.value = 0; tiltVal.value = '0°'; });

/* Spin speed */
const spinSpeedSlider = document.getElementById('spinSpeedSlider');
const spinSpeedVal = document.getElementById('spinSpeedVal');
let spinSpeed = 5;
spinSpeedSlider.addEventListener('input', () => {
  spinSpeed = Number(spinSpeedSlider.value);
  spinSpeedVal.textContent = spinSpeed + 'x';
});

/* Go to King */
document.getElementById('goKingBtn').addEventListener('click', () => {
  if (!kingAnchor) return;

  // Stop spin
  const spinCheckbox = document.getElementById('spinToggle');
  spinCheckbox.checked = false;
  document.querySelector('[data-target="spinToggle"]').classList.remove('active');

  // Reset tilt to 0
  tiltSlider.value = 0;
  tiltVal.value = '0°';

  // Reset camera to front-facing, elevated to match king's latitude
  const dist = camera.position.length();
  const kingLat = Math.asin(THREE.MathUtils.clamp(kingAnchor.y, -1, 1));
  // Position camera at king's latitude elevation, looking at origin
  const camY = dist * Math.sin(kingLat);
  const camZ = dist * Math.cos(kingLat);
  targetCameraPos = new THREE.Vector3(0, camY, camZ);
  controls.target.set(0, 0, 0);

  // Reset any previous X rotation
  targetRotationX = 0;

  // Rotate globe Y so king's longitude faces +Z (camera)
  const kingLon = Math.atan2(kingAnchor.x, kingAnchor.z);
  targetRotationY = -kingLon;
});

let currentTilt = 0;
function animate() {
  const tiltTarget = Number(tiltSlider.value) * Math.PI / 180;
  currentTilt += (tiltTarget - currentTilt) * 0.08;
  spinGroup.rotation.z = currentTilt;

  // Smooth camera reposition (for Go to King)
  if (targetCameraPos) {
    const d = camera.position.distanceTo(targetCameraPos);
    if (d < 2) {
      camera.position.copy(targetCameraPos);
      targetCameraPos = null;
    } else {
      camera.position.lerp(targetCameraPos, 0.08);
    }
    controls.update(); // sync OrbitControls with new camera pos
  }

  // Smooth Y rotation (longitude → king faces camera)
  if (targetRotationY !== null) {
    let diff = targetRotationY - spinGroup.rotation.y;
    while (diff > Math.PI) diff -= 2 * Math.PI;
    while (diff < -Math.PI) diff += 2 * Math.PI;
    if (Math.abs(diff) < 0.003) {
      spinGroup.rotation.y = targetRotationY;
      targetRotationY = null;
    } else {
      spinGroup.rotation.y += diff * 0.08;
    }
  } else if (document.getElementById("spinToggle").checked) {
    spinGroup.rotation.y += 0.001 * spinSpeed;
  }

  // Smooth X rotation (latitude → king centered vertically)
  if (targetRotationX !== null) {
    let diff = targetRotationX - spinGroup.rotation.x;
    if (Math.abs(diff) < 0.003) {
      spinGroup.rotation.x = targetRotationX;
      targetRotationX = null;
    } else {
      spinGroup.rotation.x += diff * 0.08;
    }
  }

  controls.update();
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
animate();

/* ── Embedded dataset (Top 250 with Owners) ── */
const EMBEDDED_DATA = [
{t:"10848",s:"0xf67e4b32c9e6018a88f2f97e81536639cf710b8104b99b5830e021e68666794b",c:295066,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10825",s:"0x0b6c450185abe3f4821376c156684a01ae84c7de764b9d12fbe13a642bbbd83c",c:213344,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10778",s:"0xba531ada001177392449a546127e5fb6bb93ea5cd3d78b6b693da8f6d5694705",c:186192,o:"0x1dFc27E6c52a8f64097E2970Ae7f33fa30d525ba"},
{t:"10805",s:"0x19bb492786c8e8e6bce41ecc144f5db3c16b1c628e9925a9415c49159297f5ac",c:126890,o:"0xe3D73DAaE939518c3853e0E8e532ae707cC1A436"},
{t:"10826",s:"0x08339288e9bd9dab9a236c428e21f3aac7d52aff3f0903a0398c1fc622f532f8",c:105766,o:"0xd6dF883A4927C4068f017573D781A4a62dfC992D"},
{t:"10675",s:"0x154bed7b3d77f4df5204594ae558ad6059799e57c50316cf8a4fb444898bd1e3",c:103852,o:"0x0EEfA7e7877aEb0ce0ffcED291f492458AAE19Eb"},
{t:"10820",s:"0xc501451b0bb3b41d9d606f59c61e4f9068fa8efd8962529b1b797a9e5205a59e",c:95290,o:"0x0B4c12293D4136A6fa4ABb9a1610C5d2eC920dF9"},
{t:"10691",s:"0x5c473a0c6e64d73b3847b79dd3c9c51cc023e9e020a7ffb9e04f3885919dc52d",c:92708,o:"0x5064d629cc6C1799E92C68225963bE309Ba5558a"},
{t:"10652",s:"0x4ac7ebbe0114a2b8c83df6c694a349d05df7f3cb04f6d2da972861ef2ad96a51",c:92160,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10488",s:"0xb19ad6bb3d7528e151a7d0cbc58591fb16d370fcb967abf8a9cfacf17239abc8",c:91328,o:"0x7f8DF7a5D72e88ea27798Ff604959d235AAb5090"},
{t:"10817",s:"0x3277f2c4b8bfa85c3dbf342728c1b22947690b9e392d03b0a1fd545b1990409d",c:89922,o:"0x00f7F1e3C29cA2Ba610039e98b80C819F212600c"},
{t:"10443",s:"0x522fe34892b2f807b051b9b6db606efc2b146434bdab848cd4c942c921ac700e",c:88428,o:"0x916A56585450E785A96b6f554fF24FFCb7316912"},
{t:"10327",s:"0xf95fb76b094560ae7f7a69647594c4e69d31ad06d6a85f1ef7fb9544a877cb73",c:87450,o:"0x31bad1eC456813D67dE338c2E55A23aF23f1B163"},
{t:"10721",s:"0xdb7a66bc735f345ce2156c4b1a5177e07291706d0a1d13249e613d26d65d43d6",c:85792,o:"0xB630AbD9a5367763B7CBa316e870c4A54064CC9F"},
{t:"10771",s:"0x9a94571829518e1a84152660226fd87ebb08c5630e95b49cbb5d923282b6d043",c:85768,o:"0x0ec364eFccB98eD3656C280a816631C1663eF0ba"},
{t:"10756",s:"0xacb037bfc6bedfd824be7b4df27020c4551f8e6f27067e01ef8ebd83c6497ab5",c:84686,o:"0x78Ffa27D122043874DBE879B7173180FeD3ccf1D"},
{t:"10741",s:"0xa8bb891bd7df3790b10567f8fb56d6245f12759ecec8738a5ea0af6e975faa84",c:84580,o:"0x9F0aB29c361B57C06A6Ab4D68b08B6BfaE5d1517"},
{t:"10594",s:"0x9bfd200281184c8380b0c5470de5ceb062bbbf89402756856a8c9b6707485eba",c:83308,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10765",s:"0x5a94a52701d922b23a8da09358ed97360fd98b2957e9a53b6d24553dafaecd85",c:80662,o:"0xef3F063136fE5002065bf7c4A2D85fF34cfB0ac0"},
{t:"10465",s:"0xc2bacd08a431531d742856afc12329bac1d7b65d307d38b2bbb69cdee6758849",c:78900,o:"0x824fd69Ff7CB3ec38dbBE3376adDd86578E91E6E"},
{t:"10549",s:"0x205818513d7ae22823e68fc45038bff924daf8c91ec17eca5988f7477bbfbe97",c:75944,o:"0xE7436AFad54fec84A67bE7866ad21f4fb0d3eFC6"},
{t:"10313",s:"0xca0abcefa0616a7e2131af0d684c43cc5277dbc439fa6e72eafa05d4e71aa61b",c:75940,o:"0x916A56585450E785A96b6f554fF24FFCb7316912"},
{t:"10308",s:"0x62e90091a7cfd39e4b0e012c0401bae5bf8f82805b7d8e3ee04d0dcd6cbfb132",c:75930,o:"0x916A56585450E785A96b6f554fF24FFCb7316912"},
{t:"10289",s:"0xdfb1d6197f1f59edd15a15bb64340ef3371e53afe3a62927c59f009e825f0ab3",c:75838,o:"0xD5157866F7bB8f490E13Aba960f689178635EAD2"},
{t:"10395",s:"0xdb642f9d4e692cdf9858107b1169400ca2eb24ac7bca113ba46f2a4d9421a19c",c:75424,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10657",s:"0x8eeba1259fd687cfabb8b2d86e5ecc72f33321256a7bfac96b3c882599212344",c:75332,o:"0xf433bdbf45ae8396805F5882C9F395b246E62AF8"},
{t:"10336",s:"0x1b548f75eccc038a5107d1dba1b5c04a300243e3d830bfd3b26f5c87650153af",c:75190,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10529",s:"0x8f1939d010c93198594f4adf8d866f2136177c429420368b48d43beae89e8daa",c:75148,o:"0x3F3789BD5abeA9ee40Db5fd8420371eFfdF2373a"},
{t:"10353",s:"0x9837bf74d99f5c1c4f018cf07cf1a69e72a56ef497089824b2b1e863ff6ce2be",c:74982,o:"0xd6dF883A4927C4068f017573D781A4a62dfC992D"},
{t:"10424",s:"0x4315d0bbd9f7b16ae20cd08f3a6d8723a4919e7216e155e33aa345f134ac1292",c:74722,o:"0xef3F063136fE5002065bf7c4A2D85fF34cfB0ac0"},
{t:"10345",s:"0x7ffacd1680b350ee4a047fa8b44973d85353bcd596ba8bd6198ab1661ece2f5c",c:74626,o:"0xFccA6795934528041F9F8D09883B2f2fB6806B65"},
{t:"10295",s:"0x03e5d2c91c3126b1c395eb79ea5ea46bb56182ddbf5b773f0e320454cb23fcb1",c:74516,o:"0xbc204a037386B6C597087ee90f62ACb7C44b1955"},
{t:"10296",s:"0x6291da4ef7e73dc52acd92b85726fa28740ffaaa7bfcf02ea4da8b5c22035d3b",c:74516,o:"0xbc204a037386B6C597087ee90f62ACb7C44b1955"},
{t:"10297",s:"0xd5dc90ddac9713d135586206c3d43257ac7376809b85b93eeadc41ddd1373f12",c:74516,o:"0xbc204a037386B6C597087ee90f62ACb7C44b1955"},
{t:"10298",s:"0x3fc7f3a03eedc1897aaa32b7889251633f30ab3dae16e9cc0705012947af43db",c:74516,o:"0xbc204a037386B6C597087ee90f62ACb7C44b1955"},
{t:"10396",s:"0x01c50f7fafc7b7b49922df0f0bb3d3a6ef546f62a1bcd1dca21831f7f68139a6",c:74382,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10518",s:"0x4e4143aa8f94062bcd61f6de72670236b927d1c93176401b4d2154d0394d6227",c:74358,o:"0x7a258cF0985300AAC919c2E8714E588e5C26DFe6"},
{t:"10347",s:"0xeaeebacbd4046196d980e4f15a6e70821fafdc73433dd8f32d97aa09475002ba",c:74350,o:"0xDC52Ad5d7bcBcF2b3C3d38e353F1004FF61f32D2"},
{t:"10349",s:"0x0458f93838f4a4ed6b7957a4ce894b8fe7daefe1977055391900d9bea1c6db7b",c:74350,o:"0xDC52Ad5d7bcBcF2b3C3d38e353F1004FF61f32D2"},
{t:"10426",s:"0x8e990ef8dc70089a3348decd49fe3e269572d3e79ed20f686a363c69097f837f",c:74330,o:"0xfDcDAB8EdA48a2d22E90ef891540A4c5E031f77A"},
{t:"10622",s:"0xe5aa557c21b6743533664dcc6d0b672273205bc28c9e8d21eb5cfe5ac5548396",c:74278,o:"0x4A5fbc1A2bd01Af245B9b1e832fE10099c6D6336"},
{t:"10744",s:"0xeb77cb91beb4316ac7c1512fbbcd9a35c552fc726974f21b0e91e0057ca0ac6b",c:74264,o:"0x9F0aB29c361B57C06A6Ab4D68b08B6BfaE5d1517"},
{t:"10397",s:"0x0ce7c1f1f9ff45aba83bc99b7299a2b29d5598bf4c3cdd7f176a6da46a529662",c:74248,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10398",s:"0x2f9c6d1f1d29ff64f94b45d98c3ab49155160d0211bad84739c7894d7277e974",c:74248,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10399",s:"0x4c0c3370b40a623a30de354ad3bef93373b894716ea4908fa0ab7c89cedc18ad",c:74248,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10409",s:"0xa177639d2ef2dcad5ebbe99ca5a52801ef745d2c23091f0d6afb2456acd7c5bc",c:74248,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10422",s:"0x79f945659f4cb44de4da88288cc5f4a9f3b87e02e6f4d1b6932f9218c18f677d",c:74188,o:"0xD5157866F7bB8f490E13Aba960f689178635EAD2"},
{t:"10403",s:"0x130ad718b07d061a2f6722ea471f4446f752e5d2fb15d899435aa3cbd871c4a3",c:74114,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10522",s:"0x655b96f4f81a2723ced748a01d5e6c5efa45b375d3a9709cbc02b23f30d19e6b",c:74094,o:"0xecB00A992f76f7a58661Da8Da524B611FeD494a9"},
{t:"10523",s:"0x3c2ed925e5b6234c13bdfaa65dc5ae6a8c2c8f4390d876373417adfe52f713df",c:74094,o:"0xecB00A992f76f7a58661Da8Da524B611FeD494a9"},
{t:"10533",s:"0x2f96ef39607b828760e87de3dc5d454cc89489a2a324a02409b5c331871925da",c:74090,o:"0xF653cFa85EACd26ad8b9EcaBbfADEE52e8D9fa72"},
{t:"10535",s:"0xe368837c66c9ae8a1129e370a5114dfa32663c6e51c252ec60b8388c4ed6836a",c:74090,o:"0xF653cFa85EACd26ad8b9EcaBbfADEE52e8D9fa72"},
{t:"10317",s:"0x1cf5f904ba33ecde1c51895dd6eadd104990c6058654a146ac023ff210adda9b",c:74048,o:"0x31bad1eC456813D67dE338c2E55A23aF23f1B163"},
{t:"10319",s:"0x16405f293bffd4cbe9087d8c599c441c404ebed9ce42801e5e487447e60e2271",c:74044,o:"0x31bad1eC456813D67dE338c2E55A23aF23f1B163"},
{t:"10386",s:"0x5d4738f680fd27b8375e7ef9ec895deb984c053ae41099f20355fb7ba6bf28bd",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10401",s:"0xe3664308bac7ce9925f84626e7346a2963824075ff7068fd661767751fa9491c",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10404",s:"0x7e43dc54b4cb7890d1a617989f0214475d2506e7a42ddad1924148e8d83b38e4",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10405",s:"0x68e4fe9060ddade1693a2a94f603c0c4ed827848541b65ea4f7386a7600e3d6e",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10406",s:"0x02fb1393dd239c7c447194b69270f0f4b147babe7996f1d9fb088da49e37a397",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10408",s:"0x872ffb5927f9d624871c850afaaa4e0b9d117cc8f9700ef93856c8225ea7b004",c:73980,o:"0x0846931641992A70d393771b5D9A1AB8ad5b2F28"},
{t:"10508",s:"0xa7bd5b15eabb445206aab0548d61aeb204650bb4f068d2e05e0b15083593c6b1",c:73950,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10509",s:"0x99557235309a9e918e3f94f93e55e363f557e19641846cb2f91a331b055fd75f",c:73950,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10343",s:"0xce9ce6ce3accdc8f557e649318f2b6635cfe398fabefd7316030c95ee2f823f8",c:73886,o:"0xFccA6795934528041F9F8D09883B2f2fB6806B65"},
{t:"10673",s:"0xb86a8c8e9974be0761b5509c375f9c241d5fedfb05b4222dc338600feeca5a34",c:73662,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10672",s:"0x799389b49785d30f441779475107a947ef69369b717cec07c7ee496bba8eca1f",c:73650,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10579",s:"0x30edcbedb4668f0d7f617f589c4fda9f66543230e89704f31d0c8bd4673d1cd1",c:73612,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10580",s:"0xd69bb73c7cd0ab7880d79e3d3b9d7df983423f78eef7784893057fbe1154da9c",c:73612,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10581",s:"0x3de72c74a4c9022f3aed5b67842f49ab4d18a92c642795f1039b383acabc976b",c:73612,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10589",s:"0xe3992cdbd86ae8c43dc383dcd317a31282e4d967e829089fc4bb08e88023e8d0",c:73594,o:"0xE00A7Ee3d4De8ff97a99e37466Ed9821648dd3f3"},
{t:"10490",s:"0xb6bae45dc81fe6867481f91cfc8c358b9b97e63dfe2870012080aa9d43c617e3",c:73576,o:"0x7f8DF7a5D72e88ea27798Ff604959d235AAb5090"},
{t:"10492",s:"0xd148cc9c78c8433d6be18c705a64677907a929363ff2ad4e91a4b0827e2ea2f2",c:73576,o:"0x7f8DF7a5D72e88ea27798Ff604959d235AAb5090"},
{t:"10494",s:"0xb3f4c960568ce1532def9efb1376915aae5912cb21aaa73309439cc20f9bfae5",c:73576,o:"0x7f8DF7a5D72e88ea27798Ff604959d235AAb5090"},
{t:"10624",s:"0x7e0282f95078c03bc0be0bba9a80c7efe19d73685018759ef5ab92dcdb2f7067",c:73476,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10663",s:"0xcde4d9ba33e8d69d565fa61ddb1ab1257e59974b02c5f183ea16e570746b7b62",c:73452,o:"0xD5157866F7bB8f490E13Aba960f689178635EAD2"},
{t:"10479",s:"0x5916bead3137d1835472559b2334aae11e80571f0a8c4cdb76e14bcfab3a3e18",c:73256,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10480",s:"0x4857252d2ce25d790675ca7fcf8d4b1010a2952d37312f1a684925549b3a11b8",c:73256,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10481",s:"0x11d3b1b437cc1580a6d0107c586fbdb1ef9b8bddced50b3a6d20bf27bffc39e9",c:73256,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10578",s:"0x1c03e22d394aa88df28667a984792d67ad3562615746beda835c3abf3d1c2290",c:73164,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10525",s:"0xbfe6a7cccc1af7b7bb7a2653b992c256e3c686ca05fde56d14c0abc89d5d49c7",c:73000,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10476",s:"0xb95134d119dd74aef12521f6e39d715f494cfb046b4c4d599ddb576310e5d1e6",c:72976,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10823",s:"0x809f8d39ce42db19b5731959f8af09dd4de0a1258885206842ad702f4f0a28df",c:72920,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10728",s:"0xea8a68fb175cfebfc16098bdec5dccfdb429b6fefc4e275fa7df8f2a04810226",c:72906,o:"0x6AfC28371350504864D017F7CEF8850262e3e3f9"},
{t:"10730",s:"0x95fe95d8b182178a4aa485f7c01d2c724aa294543f37f50c3f9d70c5fcf162da",c:72906,o:"0x6AfC28371350504864D017F7CEF8850262e3e3f9"},
{t:"10354",s:"0x1c4c5bc2a938a142e645cafe0a69e8a0bf991de9250351eb9bae89f96e87c892",c:72762,o:"0xd6dF883A4927C4068f017573D781A4a62dfC992D"},
{t:"10834",s:"0x9a36ff29d09265b40585dd03d7c12941d77f192ed0b6c8b80845b6a23af70b34",c:72724,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10835",s:"0x88f81aed6bfedd691523c7f53df7ada00cc95761c1dc67eb4254ebe27c32f932",c:72720,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10485",s:"0xf2ff3dc65228271f53c68ee44c78273cf6bf9738ead5f7403224991d799bb012",c:72702,o:"0xd9602D439e4563D124A5C3Cec8bB7cB96e3F271f"},
{t:"10702",s:"0xe88f4c98122f191b18d826082e80c731f22535b89346424e6ef5dc1695fec81f",c:72652,o:"0x932a9749a8844354448c235971ccB8D0f4e2bff9"},
{t:"10649",s:"0x8593363affd58c76125ec90f9e38f1bd89b98ac007857c50ea8dd82a2477750d",c:72650,o:"0xf1637ADEdEb89559c70481c3cB4f74eBAC80d829"},
{t:"10601",s:"0x4d51c5923e287c9250f53a3c29a37cb5ded6e83920781df2276e8e69df7b8dc6",c:72488,o:"0x65Eb2AA9466c52072A6D95Ea356a38bCa2B083BF"},
{t:"10602",s:"0xad4799e898983ab5a58f6395fa57d4d55a1c30dd83f3289223cbb65fd476ab4a",c:72488,o:"0x65Eb2AA9466c52072A6D95Ea356a38bCa2B083BF"},
{t:"10614",s:"0x9a865408b051bd058a5554b1ce0ff9ee57dc2e8ef63f5a191d4adf2a7fe34e61",c:72444,o:"0x91d00b76fb2633B811C69A56c062268e58bab1E1"},
{t:"10477",s:"0x78461304cbdb92412b6b5c46d44037b1f584c92cc5654cbf93a9eb1dc5b488f4",c:72442,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10478",s:"0x2fb7998213dbf29853c4d0e1a93bafab4cfa916db4757c48232107112120849b",c:72442,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10623",s:"0x74a3447d62c49b9ff0c7332a53320e7245418c9a9624cdb465c9eff5078b759d",c:72410,o:"0x4A5fbc1A2bd01Af245B9b1e832fE10099c6D6336"},
{t:"10585",s:"0x39ef63477c4847b8ee1ebd2fec040ce0c00136d9e50908a80ed71d32ead947ae",c:72396,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10586",s:"0x0df839582a49bb62cd9c0ffc8191a84df5f51f07a8164f37554634f876630960",c:72396,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10647",s:"0x7cc4110e2a3f948d16353e36be59cbc7be9209bf46c2e0873eebfce119c03e15",c:72394,o:"0xf1637ADEdEb89559c70481c3cB4f74eBAC80d829"},
{t:"10445",s:"0xdb6e5205cd1f897ccab6812a8e17fc7013264c690481e27358c256f75345405c",c:72380,o:"0xCB1cDaeFD7870dD2b97C34906f6978A32ACd69e7"},
{t:"10655",s:"0x0e1a6010741224a025e7c27467e4c2e2f6e8321e7b486f1bfa2936e1d717ae35",c:72298,o:"0x3F3789BD5abeA9ee40Db5fd8420371eFfdF2373a"},
{t:"10681",s:"0x9506b9157d63892f382a1fd149122f626b5d6661e502600436201fc4bc47d3ef",c:72278,o:"0x4bCc68200C672BC6a5f43A118cAbf2507355839f"},
{t:"10628",s:"0x15a6051b9eabf8953a85a713145c120e6c01c0cea1769a5d6d617cdddec3b898",c:72240,o:"0x0e0032b3fBD6cF97545f2191c980efE862880048"},
{t:"10665",s:"0x6b360e08acc4119291aefee1ffc854d6531b1d3c728c9a12da8ac3edb1732016",c:72182,o:"0xD5157866F7bB8f490E13Aba960f689178635EAD2"},
{t:"10678",s:"0x365d980006f411dde0416d6a2978ff6c24b7f66489776291a5546bd84124772d",c:72072,o:"0x4bCc68200C672BC6a5f43A118cAbf2507355839f"},
{t:"10615",s:"0xec36f97750fd5c90d5077b3927096780c934bf37f731edb9f8e3b4dbe731ec6c",c:72056,o:"0x91d00b76fb2633B811C69A56c062268e58bab1E1"},
{t:"10641",s:"0xfdbade945d9a1156ba96d787baca1d52cbedb649acd491772f80434358c622c6",c:72042,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10467",s:"0xb2dd310e7621d82c79139ebd2f564fab4e20cbf9d202cef4e2f3f62d2b39cf8a",c:71980,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10616",s:"0x703ee6cefd5c100d2033d44f9682bb028bec24d55cbd96601572cfa0a86ad4dd",c:71956,o:"0x91d00b76fb2633B811C69A56c062268e58bab1E1"},
{t:"10682",s:"0x8cb59eaaedfad68c2d6cc209b88e964d6a1a852f6c71aadf22ff21765eac2098",c:71934,o:"0x4bCc68200C672BC6a5f43A118cAbf2507355839f"},
{t:"10644",s:"0x07783030d72641805d550aa25583c0be91b071ccedfb4dfdb6b286ae1f7577f6",c:71926,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10274",s:"0xce608769039909a10098875a086b781458051fdb1b1cab0dc66765a7ad10aa92",c:71696,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10556",s:"0x844293e35f90aec0b742e3d493e4632d2d93fa621494a9d17484ef96d5675f2a",c:71664,o:"0x5eC1230DCb1BD3bf46cF2F008e0ACb4eC1C5C500"},
{t:"10482",s:"0x775e5b7117e9947796c58e4d62daf76ef0e66f53fafe0eb3d56c737093faad66",c:71490,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10483",s:"0x2d4032a3ad567bf9a338ddf33f99aee60cde3cd166492d0ddb407181e7abdf2c",c:71490,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10484",s:"0x843e51518087be57339e1f12bf4c380b9394c9f9bda021583f51f60ef5afbd6b",c:71490,o:"0x13ED8515eA47b0B2dc20c7478F839E92b48f6A3b"},
{t:"10562",s:"0xa0a6c8e870ed6ff6ff610b98380c381ecf65737f1710c256d362ed98df9aa054",c:71420,o:"0x0709758056377647D7212730D888862E77becd69"},
{t:"10370",s:"0x765422cb786f59f3b59e30687b28ea2c7ce00fe2a17cd6d376c2bffd6b2ff69a",c:71380,o:"0xfb8cDd7B3450Acf5fd9f3A3A5912b2231E1c1A7A"},
{t:"10850",s:"0xd2af7b1a9236694cf37289462c166aa9b599110eac9dfa4738338f9e7a2d55b2",c:71076,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10674",s:"0x93e3da89c27ca1c4f3700e2161a3482455f8383e5eb7a70e92ef72218266459a",c:71014,o:"0xD3d3b70a9BA3D6C8dE8809Ead75a3cA47915cEb9"},
{t:"10634",s:"0x6b30702f3947049f9d071a39021012352a396d36ebb8e66f01f4b1f63cee91c5",c:70692,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10636",s:"0x338257c1f1fe113372c584606583db77af665650261cf107da3315fed9f87b57",c:70692,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10635",s:"0x8ebc3f8ae417da65e12557bde0b435c01daf845a73e44d23b0cf8e868c53cc5f",c:70690,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10449",s:"0x672600a0cd5705ea1c6ce9745141ab56e9c3583a3214ce2caa279d47651b0d3a",c:70654,o:"0x65Eb2AA9466c52072A6D95Ea356a38bCa2B083BF"},
{t:"10450",s:"0xc67c21b4dc64ced351044de130bd60a01748abf9d3c582f40768f3be341317b6",c:70654,o:"0x65Eb2AA9466c52072A6D95Ea356a38bCa2B083BF"},
{t:"10786",s:"0x187205303ed1b624fbbd3778d348245db6f44005a6420c1c6bc1ae467e5c351f",c:70588,o:"0xF36796Fc4F8FeE589FF959264C9E99ca37a1b659"},
{t:"10455",s:"0xf66d04faccba4ef5c25f78d120c5886e8b8876d1d71a1a0a24f32438479121a6",c:70496,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10456",s:"0xd78367a29fd2f3229189f8d3d68aa9c5d8fff3c8c4dc8689c1e85dd182acddc1",c:70496,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10453",s:"0x5dc4bde6785a144272c95e9fb490d9835640d9e9d407c657cb3972e9c43ef089",c:70490,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10454",s:"0xe230d0322d3e1615be949eb10fd02208b22414d67772fb5c809f3b3f89ec68d1",c:70490,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10630",s:"0x2730f5ff0c4c1820a38bd520dd880550e577a03094a93966aebf9d175d903782",c:70446,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10632",s:"0x247334689b560bd641bf268f7237a83567d930eca39c497dc279059e295be4af",c:70446,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10633",s:"0xee57f72191b04d43939586557cfea8c09baf144f52ec605042cd61eafe319ac5",c:70446,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10629",s:"0x42be250f18d727056ff7d344b3db4fbcf1171912c379a0b00b3e51e7afac62b4",c:70426,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10639",s:"0x4dfa710b96942bc3e2ebb74bccb181c6ce25b34e78350ad6e177049d5b13d7b2",c:69986,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10640",s:"0x47150c407c87119c2745c9f6cd9e10fd5280397c75b63ac311abdc97dcf9df8e",c:69986,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10558",s:"0x682370909e06f38efa7a6369590c0b048fe1cd24ee95bdade6cb9984d4fbef66",c:69962,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10560",s:"0x6264081dcd95aebb3b07c8c8eb0bdd24d45f4bc5d7bd612abf223192671adb0a",c:69962,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10561",s:"0x0327c5033990a57006f4ad193cd7be682145a74d2e3aaf94c0ab80478c3fd542",c:69962,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10637",s:"0xfd6d7a076a3ae4310c8371107f9da886081b6f6b18c239c880f73ba0429d1e5d",c:69726,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10565",s:"0x5bd82fc82f7ca8c34c09e8a3339e73bf3414ec6aa529d8681975ebcc2da7610a",c:69702,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10638",s:"0x1a4306a67557e8655909853aa58d71c8bc89e684c5440800f319903adf2e591c",c:69676,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10699",s:"0xc8966580edf6cb6b5764fc9592ae68db5e12e0f538b74149294d1fb228b252b2",c:69548,o:"0x481E30F1823eC38E997A86f59619C75F689db8fC"},
{t:"10696",s:"0xa72f2d434bee002569c485f1a63b3fb9b740096bca8f7d8627c835462751f1b3",c:69434,o:"0x6AcfBb4C80d2982A83De68158A29d98f18e6509F"},
{t:"10767",s:"0x80a56e87afc5a7e78e678e9aaedf149ce8c019510e40a18a0d41a94539e9bb55",c:69304,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10631",s:"0xcadec451def2dd0baa0884bfeb5c2d4660ce5e3f298bb4b1221287baa053261b",c:69272,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10829",s:"0x9f9524fd0a1b4115b4e8da12e980d94071a61b74163a49f938fd280a78bc0194",c:69174,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10698",s:"0x41a090d46bd13ece5e3092759e5c340a0060f6b63ba264abc2db49d4ccfc72cb",c:69072,o:"0x6AcfBb4C80d2982A83De68158A29d98f18e6509F"},
{t:"10750",s:"0x803e65ae1ea464696e29d522a1a8c810df095e451105e75ca04fec0a5ad17bfa",c:69030,o:"0x0d02Bfb5549f1CCEaf6805DE4dBc825Ee4Bbc822"},
{t:"10694",s:"0x7ca1b883fc40d8e46433e1d93ef7ba5913a2641784572021cc47905c887de954",c:68916,o:"0x01A2FF227D2392AA12A66F770593b33C76D95A2B"},
{t:"10626",s:"0x5ce449e2eeb815c463ac5ab0564ffb557ec167022e9c127eec7c074863d2654f",c:68864,o:"0xB56D7017081006D95F3E2DA76E1ED264b02D1796"},
{t:"10627",s:"0xa9eb87be177b2d4160942e241490584c48e9071a42062adb04f106c914e6c387",c:68864,o:"0xB56D7017081006D95F3E2DA76E1ED264b02D1796"},
{t:"10792",s:"0x77dcbdb9f8b70e11c2f77543fd792f7a296325735b0d9f96dfb67f423f4e6397",c:68666,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10724",s:"0x72e1262d9a014ce7a8e395a47c8d50b8d1dd162c1dfdd8acf6d07cf6ba170e69",c:67824,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10754",s:"0xe6eaec94f3ccac3a70bac58f32befd281ce8c3f50e2f1262bfaa3d5ac12241e9",c:67144,o:"0x11C32385e8D7D334D02582e7D9b2787AaC07623c"},
{t:"10748",s:"0xbd88e9290703428760194866fb2b079dfe0966b3973fdbe8e972283abda285f1",c:66932,o:"0xF616D0f21973d65aC7a42E9D2EE60A0C2dd0A29d"},
{t:"10746",s:"0x59413c5e344d46663368bff8f59f18de6affd4fc4faf19bd24ca8cd06a9f3d85",c:66464,o:"0xF616D0f21973d65aC7a42E9D2EE60A0C2dd0A29d"},
{t:"10747",s:"0xa7864167298c9238b91b0dd58b6ee6817dfd5dee57d8fd454b2c88208f7bec05",c:66464,o:"0xF616D0f21973d65aC7a42E9D2EE60A0C2dd0A29d"},
{t:"10846",s:"0xa2da9b7945553986856728d7ee2e51d36a91d01a582b1c82b5f193f66518642d",c:66302,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10831",s:"0x9d1ad56ae3fe813db56f5c6c7cbad8bcd60c43ad11dadfd287dad4881db6c77d",c:65302,o:"0xa0b08b718a332a1B7b2C9A6482CA5dFD87B7eE34"},
{t:"10847",s:"0x455c78ab2c023cbae0013e98d664d66d563b042a9cfa1d6f85e6260407e06cf9",c:64704,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10795",s:"0x8f0ff8dc6de04b2084a97c1c84db7233457032d53bc0d19b7b9271e423f84a61",c:61666,o:"0xdC384B7A3BD37E7C11d0f5b2008cBFda0Ac62f0b"},
{t:"10732",s:"0x1924b2cdb22a6975c78df3b6acfb4812ecc12beeb546cac81be1974a0d06eab1",c:59864,o:"0x8924ac1196E2ae89603925B6e001Dd14E3f7fDFf"},
{t:"10797",s:"0x22e788896a8fe7372eaeb1e29c99d59c80f6a516d861f1caa4a6c37da8458daf",c:59080,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10830",s:"0x47bdb8f76325af5a566fe199f2d92d159ced85d54226bc00f560a62f186490f1",c:58524,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10500",s:"0x4cfadba28dbc8a5ce304a4f280b000d0739ae2071f6c963dd651dc728f44d30f",c:56778,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10519",s:"0xd58dda515d833443e43df4f09bb499c31b65c474b35a1d5522601063cb1e9abf",c:56428,o:"0x9bC38BF1d3f1161F831e45aE8295090eaAe8bfD9"},
{t:"10666",s:"0x822b0ec90726f430986b983cf74cdd0f5c88a3a47a345332448d0bdab03614ad",c:56410,o:"0xef3F063136fE5002065bf7c4A2D85fF34cfB0ac0"},
{t:"10667",s:"0xba694af65c6138019c9b0afee2de88be107f1f67656f9f9fd9ee1f10b4fe032d",c:56410,o:"0xef3F063136fE5002065bf7c4A2D85fF34cfB0ac0"},
{t:"10668",s:"0x99d1b61f8d93703e64f787a9dedf87366c7d6354e3ff5806e48d9f9e8dceaba2",c:56410,o:"0xef3F063136fE5002065bf7c4A2D85fF34cfB0ac0"},
{t:"10472",s:"0x963d7a660f40a38376b6333635df89fc043e1b234962b41ee173b7e9619b3a2f",c:56310,o:"0x3a1E9721d6e961D5431E42a940D8b56857c06298"},
{t:"10598",s:"0x750907c5b4dbb26a7705c75f473eb03e46d4de37f85ceb78fcc42e26bfba7d74",c:55724,o:"0x008cF67C13f58bd55b3427543f5b04F3fE222c1b"},
{t:"10474",s:"0x790b4565c91db0650a3ed359a844d84944f1db45303605b7f0cd9246dfe1bf51",c:55530,o:"0x418eCed7262261C57c78De9396b86A580C556fe4"},
{t:"10338",s:"0xc71028f57326a9efe4afb423874556099996350bb6c153e467b94cdcfd1e0157",c:55494,o:"0x372cEd7af27e31828Db5AD1D1B09417c14430FB2"},
{t:"10365",s:"0x847ad0bc63c24985ddbd8a8dcd7e3186ad2f2a341443479428439e5cb209da14",c:55456,o:"0x5C3C8d61AA8555dddCf85F10A792056Bd1bbdfc9"},
{t:"10374",s:"0x109682a3999a310c764259cd99aeaccf43a5007e0a511abdfa3049e250158f4f",c:55338,o:"0x72115599b79e18bb6f3b0c233f920602b4889fD5"},
{t:"10596",s:"0xd359ed7eaf8dcacb222d5c803f3bf84882fefb98798ae7165580a29ef3848401",c:55232,o:"0x008cF67C13f58bd55b3427543f5b04F3fE222c1b"},
{t:"10436",s:"0xf87282cba3f5aea75c4cc3dcf5a50e04bd9cb3426df5a49ae05e0cc8d44874a9",c:55188,o:"0x0d9506F3498c73fA1b26Ec9f8B913834645a8b37"},
{t:"10471",s:"0x6aa9f78566905253a1af61e17c39072b10b26d6578c0daacbd7667fd99244f61",c:55188,o:"0x1c97c52900f2f724BbF4a428C447541D725f7945"},
{t:"10497",s:"0xa918c1f9c9cb8f26c92652b4fa2d73f790b40f6a1b3b53c1c37cf3615f9d143a",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10499",s:"0x043288f876ea5ab47d7bf81995f4e47015a2acb42682ebc710089c68043bda9a",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10501",s:"0xdfa33fd13d74ddba42996e00fe2528dda9809c6bbbc2793c0af86ddd8481ce3e",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10502",s:"0xc80ab4c5df4eaf97421ebd8ff6d8e56cd57fbb21391170d535b515d8f29a9cbc",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10503",s:"0xe3488594aa8a8b8c984f6d36a4ef5768625f366ae45824a48fae0051b6d83164",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10504",s:"0xf1767dedc4b00b140dffc6c0f66cd5712737c44334b73bd742f35a55a4972069",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10505",s:"0x12cd5de6873e0c564b78d8cc7d9cd50851b91875536d1b59b6cdf44c815cea66",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10506",s:"0x2c493cccb7ccc2f7a69e5d11362c0ef06734bc1bf0ee3a7e988283a36664d1de",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10507",s:"0xd9a17d8107cb69dd4d3a31f16a0e08326a9203ef45c4cc1caf51fbe3ae05908f",c:55024,o:"0x6186290B28D511bFF971631c916244A9fC539cfE"},
{t:"10550",s:"0xac57bf789463b1bfc0ed9bf117778914ce577a31f8b31533f5e70c597b51175d",c:55004,o:"0xE7436AFad54fec84A67bE7866ad21f4fb0d3eFC6"},
{t:"10551",s:"0xffafd84e382244431a3a0e2a48eb4252212c7278af97338e304032cef81aeff2",c:55004,o:"0xE7436AFad54fec84A67bE7866ad21f4fb0d3eFC6"},
{t:"10553",s:"0xe9a1f33480a952b6ad866d89f7b7cdede6de5faecdb17a9e351a897893f3a9b9",c:55004,o:"0xE7436AFad54fec84A67bE7866ad21f4fb0d3eFC6"},
{t:"10653",s:"0x1894bdef419c875d6f8b6ea635bc02a9b5d3e225a13d344efb971571f38a2253",c:54996,o:"0x3F3789BD5abeA9ee40Db5fd8420371eFfdF2373a"},
{t:"10376",s:"0x85aabb3e94b5fa81ce3ae94b6c0074695919b1254173744726076bcdd34a1b51",c:54866,o:"0x3967010dCCB3D507C745dB50C77f79AB19963bCe"},
{t:"10378",s:"0x13e3bbbe7dbe3acdc23399b65976257d180f2447c9d5a6d8016cc5b10f90f13a",c:54866,o:"0x3967010dCCB3D507C745dB50C77f79AB19963bCe"},
{t:"10380",s:"0xdb5c4f1708482113fc763dc2f06a6876fd2b109f73d3fea089e875a0b40d6ed2",c:54866,o:"0x3967010dCCB3D507C745dB50C77f79AB19963bCe"},
{t:"10538",s:"0x61f39904e188709d59301c8f46d52f845e4274caacbdfa8b8445683b2f241a7c",c:54848,o:"0x88E57606A1975a76038955175289Bc94F2A5B6ED"},
{t:"10377",s:"0x4c62dd5def09c23d11f28fed9ccfb83a593e2ab4f426419ac9d6dec6b232a1fc",c:54834,o:"0x3967010dCCB3D507C745dB50C77f79AB19963bCe"},
{t:"10379",s:"0x9acd1c4c8a82d3392f386c81a3f0650611436716113676a0f3e6deff5cbe5d16",c:54834,o:"0x3967010dCCB3D507C745dB50C77f79AB19963bCe"},
{t:"10528",s:"0x9949e138ae23c3fcb34427f2ddfe92962ee3012872530b0578aeff7784b6a3ca",c:54830,o:"0x3F3789BD5abeA9ee40Db5fd8420371eFfdF2373a"},
{t:"10566",s:"0x1a772d85377c6b2fd1f22b3114ca2e53aa3e4a6523d3c734a1bff624ac0c6cf0",c:54734,o:"0x293478d314bc925fc80d5af847fE15A14E5b380B"},
{t:"10567",s:"0xe77a23f60d1f410f2d1f6518c7a688b753a2afcfe1aaadc033f5ffd1f858e346",c:54734,o:"0x293478d314bc925fc80d5af847fE15A14E5b380B"},
{t:"10568",s:"0xf274ff871fec325d4e31c7778a2ef1224b1c9849a7992de63f9e8735e865b09d",c:54734,o:"0x293478d314bc925fc80d5af847fE15A14E5b380B"},
{t:"10569",s:"0x43cfc98c8f8f642821fddc2b752ed9ff8182cd53f217ff815f87545bcb40dda6",c:54734,o:"0x293478d314bc925fc80d5af847fE15A14E5b380B"},
{t:"10570",s:"0xf1a014fd1324b66fc282ea5a5651ad72f4fafb8fcf3ef6e557b33bd6839f5103",c:54734,o:"0x293478d314bc925fc80d5af847fE15A14E5b380B"},
{t:"10605",s:"0xb397dae11f5f2dfc046aa9d83ddac4566cf44da439a0730593aed82df6b0f760",c:54530,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10333",s:"0x8ccf46140cd20417302909c4e7294d6922127f05a3b129338d45d8a581dc4fab",c:54448,o:"0x02BEbb44a4fE9Eb0c0AA0205A2494394b32d3534"},
{t:"10606",s:"0xec981a54f3565316902c24d79b5b532e56e3bb0021d8a09dd13115d5a4624e04",c:54226,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10607",s:"0x0b27b4df85304de4903f60f63ae2f884cd5d2f643dc8f4237b5a4503746de00e",c:54226,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10590",s:"0x8048eca775ba58477ded8d23630a8cb138c656e608e79960a37d7a3eb84cc31f",c:54026,o:"0x7FA9DE092e280375cb7898f50E45199FfaF0dA60"},
{t:"10330",s:"0xa2a705d75088fad197f637556b43e1773f0714283d1cf1cc8c3a3482fb7626c6",c:53714,o:"0xd9602D439e4563D124A5C3Cec8bB7cB96e3F271f"},
{t:"10331",s:"0x85a34ef5cdf4a026887259b5e493afbcaaa4a7968fadcd53a45a5b2b8dea76cd",c:53714,o:"0xd9602D439e4563D124A5C3Cec8bB7cB96e3F271f"},
{t:"10332",s:"0x948dad7d3bdcd67cf50f818ef340e347ac118e4f06f342de49e59b2a494b33f2",c:53714,o:"0xd9602D439e4563D124A5C3Cec8bB7cB96e3F271f"},
{t:"10656",s:"0x83a955d3daa64eca81fc020a473501910b5f50f2746c9b4e26a97811e7088383",c:53708,o:"0x3F3789BD5abeA9ee40Db5fd8420371eFfdF2373a"},
{t:"10677",s:"0xc00160821c29330b53f0dddea2ee5f4b0ac7270d2f4233f8945e9d4ef0b1f03e",c:53664,o:"0x492346B79818f9F4A31C2779b52D1DE2C64DBff7"},
{t:"10355",s:"0xe16b57b80bf77f83f1fa6755e137262d3eea75c9c2e47feb987b401087a0e10c",c:53596,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10800",s:"0xb8547cb1f6f3934ad2d3776815327f8555b158fab4570fb160a3da5d04256f45",c:53424,o:"0x6144694d6BB0934F7d97D5c931e51fC963Bef3a5"},
{t:"10587",s:"0x1a21ddebf1f8862f730e7c2062ff001a1b859c959b25111380ae5f43cbdf4954",c:52824,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10588",s:"0x5d760463d0ec42f8f5dbd701f144f1fabc9567a4c60716abe9d13d1809549e2f",c:52808,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10603",s:"0xd5e21b330fd01d8f67fb4f448d09aa1a623d30c7818b25ae5d080cb2532e57a0",c:52804,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10604",s:"0x3bb87a077835ed702138a97b48df3dcb937b224183d8bba2c7033ba1ce5e19c3",c:52804,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10610",s:"0x46eed23bef8589a208814d5150a697e0f5208d496aae3f03f136f4c87598ed04",c:52804,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10597",s:"0x59a2f31e6c4b6b2264c3665791db5af0167a72559ea70577dc001d705cb84a76",c:52622,o:"0x008cF67C13f58bd55b3427543f5b04F3fE222c1b"},
{t:"10608",s:"0x06b0666601bc70bef33af2ceeef64f6fecc678fa213caf70f6046705290c0bd2",c:52556,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10609",s:"0x92da3b44f812f78b12c6c1039d75a8d9a0cd425f0ce6439cb760dc1f4700a9c5",c:52556,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10611",s:"0x619f0eeeabff40b0a329c6f4b9ea638974ebf8561f24b92fa87cec43176b1250",c:52556,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10612",s:"0xf8e70b00e61ed8646149cbe328e726dd6fd96093ee515f7d89861bdee539376e",c:52556,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10613",s:"0x2b2497ca4563515ca7326951ac3d1ce50bca005790d8330c375f1a6457a85367",c:52556,o:"0xC6c1729A25792690B1d034f46ac0CcF5d3CFf69b"},
{t:"10843",s:"0x49c97c2903812fdd0ca5d83cc9d81d6097ec9c08f7d99c10148f20d04245da71",c:51620,o:"0x0f32c8fBD8FE29D5EF451Ed9F8a13062C00ED583"},
{t:"10683",s:"0x8a9dfaa5f0df5eb51881a4873c91a3ed2b732982e4ba3d5ad2cba37c97ae06b7",c:50940,o:"0x73BF4353cC4Fc35F40e3Fe53281374069BB1ae96"},
{t:"10828",s:"0xe9e58a75006916f0cc57481a311d52013ea97f0c79401f90c09b0d2466a9cbfa",c:48228,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10788",s:"0x3e2b52daeec0b0f1af59a42356533646c530e4ee97376a5902493503bc948140",c:47492,o:"0x017f6B615cD8cF7261de8374460eE270572dd03D"},
{t:"10412",s:"0x1fa04304696a16aae5d3ed66a0e9da2e68a05a8ff5846e6968c0e687199e1bf4",c:45214,o:"0x9c73AB276E6588764ff185c4B34287205b32Ae6d"},
{t:"10413",s:"0x47694191a2e62433a3443c4ca18e8691754f5d2311c35cf86a586fcf2c958978",c:45214,o:"0x9c73AB276E6588764ff185c4B34287205b32Ae6d"},
{t:"10838",s:"0xb23730dcc7d28cbc2a4dc0d00aad06e1201683932fd63ad7c02390a0637c1594",c:45142,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10840",s:"0x33c1763451a6d669a6d68d1b84a3ddf9b5014cad63368472529767e6bd33417e",c:44956,o:"0x03eCafd522255D36E714F5085c67ecB0DDC9AD88"},
{t:"10278",s:"0x50c1035294507f85b8b042eecd41c5b6a767e70f1d1736bb25b570f94bf317bb",c:44708,o:"0x46CB750c1daFe8549C8F4cF52d146E561fBb08B2"},
{t:"10842",s:"0x6c17eaaf3176996917099e5c8cf9cd35fd11730e0264a7efd391c79fc2ae13f2",c:43804,o:"0x6904Dfa88D5345dc7E2DE0e1eBa32A6c1E672B93"},
{t:"10415",s:"0x29333c31ba3e48407b2834c9a471dd34fd23feff6b76a1cee7335ea0c05b3e75",c:43706,o:"0x9c73AB276E6588764ff185c4B34287205b32Ae6d"},
{t:"10233",s:"0xf3ffc45a7c3342feeaf050a76278db80cbb6a4eb356ec6ee8c2ff9cecd0480cb",c:42608,o:"0xF1a9F5AEb0F975489aC2628A22040Cf42E9fE8DD"},
{t:"10753",s:"0x3bf13ff9ea18ae685f8f3b40d63707ed72f10a79af46ba6a90320167ec78a83a",c:41956,o:"0x8264D88D3DCa4f7f20D9b96b40996e6D31e7A607"},
{t:"10772",s:"0x3324ce99a9ba37999cd003a0f22efa5e0a75db404e0d8a06a1abed6378d7930a",c:41158,o:"0xfB30CDae07272c8A37929039200201926eBa6428"},
{t:"10793",s:"0x8f52ef8544f7c92bb8f0bfbb0550c3888c2e09b68cecfd8e04119785e4e72ced",c:38740,o:"0x090c984Cc693b991D7CbaeDdB43CB75f13FE5f2c"},
{t:"10285",s:"0xc015f2046973c13030a75315791c72253d3c541a73a883fd76ba5211952da384",c:38656,o:"0x9bC38BF1d3f1161F831e45aE8295090eaAe8bfD9"},
{t:"10430",s:"0x2c72cc7e8a853a681da1455b10e882f31eeda765f213d9f9e68dbac6d6b7a72c",c:38262,o:"0x13FD513c2104941Bc399589b5391957B27392E8b"},
{t:"10177",s:"0x9f6c357915d635d3a67561de5a17c176fbe4c150feffd3a3461a8c87ad427029",c:38110,o:"0xCe90a7949bb78892F159F428D0dC23a8E3584d75"},
{t:"10743",s:"0xa520ef0ab6a005415deb3ed88453a3195e76013b3ed7e20d5630cc2a67682105",c:38088,o:"0x3b63410fAdbDA0ec0bA932fAD2997edd7A842679"},
{t:"10595",s:"0x0afa77e9167be84b8d38d51ad9e4ee6b3c5d5b08ffcf49542970b5f8ec25e4ab",c:37980,o:"0xF573a01c1494B2Ed06BCF2767FD4cDcD3410E931"},
{t:"10512",s:"0x025c187942686fd6e4952afc9dfe48a782e085ff43c1239edc950dbc13f70d4b",c:37856,o:"0xE00A7Ee3d4De8ff97a99e37466Ed9821648dd3f3"},
{t:"10416",s:"0x0ad3c81ecddedca6e38e83e911527fd5d3df24c8027ccfdcecefd4f6e64cf646",c:37848,o:"0x7768FBc67afecF2b4Caee9D1841ad14637D13652"},
{t:"10526",s:"0xbf971d13e82a52bf985e8300a226056f459434d895619bc64fff077fa64f060c",c:37822,o:"0x28Ab5CED2faC1daA2cA87c2f75265AE787D48f06"},
{t:"10749",s:"0x29d280a7a3347eaab61e498a7b2c57e8c1311efb16d37a3de0452a8ec450b3cf",c:37728,o:"0x61d164CE94e335512ca39d7225F1cf80d1B53B3D"},
];

/* Auto-load embedded data */
function loadEmbeddedData() {
  const topN = parseInt(document.getElementById('topNSelect').value);
  dataset = EMBEDDED_DATA.slice(0, topN).map(d => ({ tokenId: d.t, seed: d.s, cells: d.c, owner: d.o || null }));
}
loadEmbeddedData();
</script>
</body>
</html>
